[
    {
        "id": "c7f096e10163bb26",
        "type": "tab",
        "label": "WC - ÉCLAIRAGE",
        "disabled": false,
        "info": "Flux permettant de gérer les automations de la pièce WC",
        "env": []
    },
    {
        "id": "3fa7bc2ec3251969",
        "type": "tab",
        "label": "COULOIR - ÉCLAIRAGE",
        "disabled": true,
        "info": "",
        "env": []
    },
    {
        "id": "8542eae0a2ca9603",
        "type": "tab",
        "label": "1er ÉTAGE - VOLETS ROULANTS",
        "disabled": true,
        "info": "",
        "env": []
    },
    {
        "id": "24cc6268e21ee81d",
        "type": "tab",
        "label": "1er - ÉCLAIRAGE",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "1f44f5626a6cdfbe",
        "type": "tab",
        "label": "GARAGE - ÉCLAIRAGE + CAPTEURS",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "03fd71f1c4da7b69",
        "type": "tab",
        "label": "EXTÉRIEUR - ÉCLAIRAGE",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "75e3af83e1a079d2",
        "type": "tab",
        "label": "NOTIFICATIONS",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "d38a632520fcc2d9",
        "type": "tab",
        "label": "IKEA Ecosystem",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "ef4177dc60cc0aa0",
        "type": "tab",
        "label": "BEDROOM - WakeUp",
        "disabled": true,
        "info": "",
        "env": []
    },
    {
        "id": "af210e86da7125ea",
        "type": "tab",
        "label": "CHICKENCOOP - Occupancy",
        "disabled": true,
        "info": "",
        "env": []
    },
    {
        "id": "bbfee81ec5710813",
        "type": "tab",
        "label": "PORTAIL",
        "disabled": true,
        "info": "",
        "env": []
    },
    {
        "id": "2209105bf5897af5",
        "type": "tab",
        "label": "ESP32 CAM",
        "disabled": true,
        "info": "",
        "env": []
    },
    {
        "id": "9914abfb95fb25de",
        "type": "tab",
        "label": "HOME - Occupancy",
        "disabled": true,
        "info": "",
        "env": []
    },
    {
        "id": "20f09a7263a738c7",
        "type": "tab",
        "label": "TAG NFC",
        "disabled": true,
        "info": "",
        "env": []
    },
    {
        "id": "7b717244f7527f26",
        "type": "tab",
        "label": "MEMO : Moment/Humanizer",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "89f35d0e7f2f36e7",
        "type": "tab",
        "label": "TEST",
        "disabled": true,
        "info": "",
        "env": []
    },
    {
        "id": "e47116f2e9504c6c",
        "type": "tab",
        "label": "Cube T1 Pro",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "0a410973091ca16a",
        "type": "group",
        "z": "ef4177dc60cc0aa0",
        "name": "RÉVEIL - LUMIÈRE - Table de chevet",
        "style": {
            "label": true,
            "fill": "#ffffbf",
            "fill-opacity": "0.6"
        },
        "nodes": [
            "cc1f27809a63a33a",
            "ebb53a51ab5ccf11",
            "fbda5a46dfbf9398",
            "a81733330fc2bf22",
            "69c4b32dc0cafed9",
            "6dca6d82eb07e59e",
            "de0a9319514f8be4",
            "b247e2d08a620c96",
            "468a62b856421418",
            "4b21984e481a7b0a",
            "23156388e1dd954d",
            "215fdf80459d2559",
            "228c02c3187f2526",
            "ac459b9b77ece7e6",
            "d290ad3769611a62",
            "9087453ab661c6aa",
            "659b074d13bc4a48",
            "0a5dbec93fe12596",
            "a6c13a984da3bcb9",
            "f04d2855a0cf9d58"
        ],
        "x": 54,
        "y": 19,
        "w": 1872,
        "h": 302
    },
    {
        "id": "8f5d27ba3f5554b8",
        "type": "group",
        "z": "c7f096e10163bb26",
        "name": "RDC - WC - LUMIÈRE - Détection",
        "style": {
            "fill": "#ffffbf",
            "fill-opacity": "0.6",
            "label": true
        },
        "nodes": [
            "925d7d4f5be9d355",
            "b311b044dd65683c",
            "d0f7d4a5922b3d2c",
            "3972e45a7e988a20",
            "91c88edd25deafdc",
            "bbfb17536196674a",
            "f6e385ce4910c357",
            "4fc1cd124c3cbbce",
            "01b0aff8b308b646",
            "27252ce04f9ef701",
            "d34337201e513d90",
            "8ca98a17df9b4c5d",
            "16c96ffc3c5e8253",
            "8a04f4acba19d67f"
        ],
        "x": 54,
        "y": 59,
        "w": 1172,
        "h": 422
    },
    {
        "id": "33c35b0c10a45413",
        "type": "group",
        "z": "7b717244f7527f26",
        "name": "",
        "style": {
            "label": true
        },
        "nodes": [
            "190891f8.377506",
            "4fea9ce2.4725cc",
            "3c922d1a.4ec682",
            "7d005619.57e83",
            "4eef0593.5d0e24",
            "e9e897f3.f23db8",
            "d0d9146d.59da38",
            "e3288390.06fad",
            "cab8a0fe.d50278",
            "757e3575.b97ea4",
            "e48a268c.7470a8",
            "a283a279.87395",
            "e4176e86.fd4f28",
            "82edd4e3.7517a8",
            "856447c4.9b118",
            "dbfff1bf.047e48"
        ],
        "x": 114,
        "y": 59,
        "w": 802,
        "h": 502
    },
    {
        "id": "b428f559e6f3fdb3",
        "type": "group",
        "z": "7b717244f7527f26",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "d4f1e907.c039a",
            "b69a68f2.86227",
            "98a09560.d0f7c8",
            "26b90e19.ec32ea",
            "6969869b.9661a8",
            "8f921df4.df755",
            "bd2fd2a3.3d0b88",
            "4d1b6b65.285d2c",
            "6850f375.2dccdc",
            "67e9d190.0bc4f",
            "86e0a151.259b28",
            "ad2a6077.ddcdb8",
            "ffe556c3.2b9f78",
            "6e52a601.24ab18",
            "861de75a.77fa9",
            "78e43b8.ee91844",
            "64ed3c6f.2abaac",
            "392a1ef8.e68542",
            "aa8e7959.37184",
            "15094e69.c47492",
            "fe7ccdb4.4deee8",
            "237ff9ca.f8d1ee",
            "bb9c80ff.83516",
            "bc9cfad2.10a04"
        ],
        "x": 154,
        "y": 759,
        "w": 1002,
        "h": 482
    },
    {
        "id": "58cb65c46e615c58",
        "type": "group",
        "z": "89f35d0e7f2f36e7",
        "name": "",
        "style": {
            "label": true
        },
        "nodes": [
            "50c6f0fb59536843",
            "04b2e790f30c5a63",
            "7ed283dc8605be9a",
            "325e6e3d6f7869d5"
        ],
        "x": 164,
        "y": 139,
        "w": 1102,
        "h": 82
    },
    {
        "id": "09be53fdb25893ef",
        "type": "group",
        "z": "af210e86da7125ea",
        "name": "Détection via Frigate",
        "style": {
            "fill": "#ffefbf",
            "label": true,
            "fill-opacity": "0.5",
            "stroke": "#ffdf7f"
        },
        "nodes": [
            "cc5dde0c096066f6",
            "e836209b08fcef9c",
            "977012b1b843e61c",
            "fe1d1512fdb86fea",
            "3f67cf9404973b0e",
            "c6baac15b0ed10c9",
            "fdc5dc212c32430b",
            "beea059a88205ed2",
            "0e68e644c7c84baa",
            "b0626bcf6fc413d9",
            "f2d21fee33cdeee3",
            "269ca801a532f7ce",
            "8d60ad8c47919050",
            "a9e95bbb464bd0f1",
            "a669f9e9641d454b",
            "ca6091627776ec66",
            "929d3f6ea1877a8b",
            "e267d4c99d7ef3d8",
            "7b70be684414259e",
            "3a1b0a6dbe4c4eeb",
            "1474a585ff74f391",
            "e4a3ead22ff778bc",
            "b2921357ddce9fae",
            "541906a304110cec",
            "620de65d8d3b6be4",
            "5fc5feabf39917ad",
            "cd2374f0972e4d4a"
        ],
        "x": 74,
        "y": 79
    },
    {
        "id": "4b847a0eb28caa8a",
        "type": "group",
        "z": "75e3af83e1a079d2",
        "name": "",
        "style": {
            "stroke": "#addb7b",
            "fill": "#e3f3d3",
            "fill-opacity": "0.5",
            "label": true
        },
        "nodes": [
            "edd13d5c94cafb55",
            "26671504dced3c18",
            "9e1c3abd780937b1",
            "8e402fc944b406f0",
            "8e67b5b7ae2d9ce2",
            "a4a6e7f9a998094c",
            "1ef1bcbc68c105db",
            "a54d09c6fb24673d"
        ],
        "x": 54,
        "y": 79,
        "w": 792,
        "h": 242
    },
    {
        "id": "ba56e8ea68618e11",
        "type": "group",
        "z": "1f44f5626a6cdfbe",
        "name": "Pilotage de la lumière de la buanderie",
        "style": {
            "fill": "#e3f3d3",
            "fill-opacity": "0.6",
            "label": true
        },
        "nodes": [
            "5134cc6cfacbfb13",
            "cefc512de73a647a",
            "ff251351ecf1ebc4",
            "ce30b2d8eeb9349a",
            "a812ffb1dc676ee9",
            "ccabbd70f8a8f903",
            "f83d064788e3054c",
            "ae459bd3134a30e4",
            "36d494d3b05a17c5",
            "70508fc8602632f1"
        ],
        "x": 54,
        "y": 59,
        "w": 832,
        "h": 442
    },
    {
        "id": "0136400a60e9cdae",
        "type": "group",
        "z": "bbfee81ec5710813",
        "name": "Notifications suivant état du portail",
        "style": {
            "fill": "#e3f3d3",
            "fill-opacity": "0.6",
            "label": true
        },
        "nodes": [
            "e264767476a0c59c",
            "80154b2f2d109cfd",
            "b8647530bd171ead",
            "40eaf4470dfa8ba3",
            "e37bc9065cf5481d",
            "b5d28ddd2e14aa4e",
            "2e9786e00f828749",
            "d653058370f83e1b"
        ],
        "x": 54,
        "y": 59
    },
    {
        "id": "51da21cfd7ebf106",
        "type": "group",
        "z": "af210e86da7125ea",
        "name": "Notification de l'état du portier",
        "style": {
            "fill": "#e3f3d3",
            "fill-opacity": "0.5",
            "label": true
        },
        "nodes": [
            "837c412edd20b1ab",
            "5e4273c703098c3e",
            "cd0f570e75108444",
            "36d6b8effb06de08",
            "faf8d80fbdccf2b2"
        ],
        "x": 74,
        "y": 599
    },
    {
        "id": "8d0ec531b4a00dcf",
        "type": "group",
        "z": "ef4177dc60cc0aa0",
        "name": "RÉVEIL - ANNONCE - Lenovo Smart Clock",
        "style": {
            "label": true,
            "fill": "#e3f3d3",
            "fill-opacity": "0.6"
        },
        "nodes": [
            "3e55f6127904f54f",
            "9f16946423f3476e",
            "d370cd813312ba19",
            "4de035aced916c17",
            "5f9d69fb36f3dd48",
            "d618b5c72cb48b31",
            "11e198fbd1d50498",
            "0999f33e79a3fad8",
            "09c6ccd86e5a4981",
            "9ca33f25efebf4f6",
            "be604070ad6dda3a",
            "b1596809852e2dc0",
            "1beff511a4d8eb44",
            "3ce0719cf7669298",
            "dc4a90601c3f38c1",
            "9774f85208f802ed",
            "a1d01c60a79665a9",
            "0b891e9f8170d9ad",
            "3204712dc4e2bdb7",
            "a3de5728a9370859",
            "bf9609e444a455af",
            "ad7251d7cec3dd01",
            "d1c6b22692c55cd6"
        ],
        "x": 54,
        "y": 379,
        "w": 2392,
        "h": 442
    },
    {
        "id": "c8157906275edb13",
        "type": "group",
        "z": "ef4177dc60cc0aa0",
        "name": "RÉVEIL - LUMIÈRE - Hall d'entrée",
        "style": {
            "fill": "#ffffbf",
            "fill-opacity": "0.6",
            "label": true
        },
        "nodes": [
            "6401f6e477ccbf54",
            "c4204f8f6dbe542a",
            "4333aa870790a3f5",
            "4f9cc7553bbf3230",
            "b4f74a851b7336ca",
            "ecc063e246abcccf",
            "6fdf7127eece1c55",
            "bd1195423559a8fb",
            "b831e5a06ca31a02",
            "64754e63faacd2f0",
            "9824f605cb283d08",
            "0ebdf36ad1d1fda2",
            "c9916fc266863c83",
            "573e974d78873055",
            "ea30bc34a1bce9d1",
            "0a192d332821f6d7",
            "7142c7a8cc28a951"
        ],
        "x": 54,
        "y": 919,
        "w": 1932,
        "h": 302
    },
    {
        "id": "720379d6691a57cf",
        "type": "group",
        "z": "d38a632520fcc2d9",
        "name": "",
        "style": {
            "stroke": "#ff7f7f",
            "fill": "#ffbfbf",
            "fill-opacity": "0.5",
            "label": true
        },
        "nodes": [
            "5ad473e24fa7b2dd",
            "42ff5423ed6c02d6",
            "0b6484862ac193f6",
            "5c9599f90c395d39",
            "fe91180faccea2cb",
            "76d587e261d8cf31",
            "db060e5ad6e44edb",
            "98204f32600bf41d",
            "98bffa6e55b051dc",
            "a6ba4dc8e6bca23c",
            "28189ba1bd1714b2"
        ],
        "x": 54,
        "y": 19,
        "w": 1432,
        "h": 502
    },
    {
        "id": "e49a024a3d2d324e",
        "type": "group",
        "z": "03fd71f1c4da7b69",
        "name": "GESTION DE L'ÉCLAIRAGE EXTÉRIEUR VIA LE PORTAIL",
        "style": {
            "fill": "#e3f3d3",
            "fill-opacity": "0.6",
            "label": true
        },
        "nodes": [
            "2472395ca293c7be",
            "fd22e0b89837f546",
            "88484b79177a6d01",
            "a9d8346ac1438db8",
            "940b78280a93adf2",
            "4d5c51082a1328c4"
        ],
        "x": 94,
        "y": 99,
        "w": 1512,
        "h": 122
    },
    {
        "id": "3838449281fd224d",
        "type": "group",
        "z": "03fd71f1c4da7b69",
        "name": "GESTION DE L'ÉCLAIRAGE EXTÉRIEUR VIA LA PORTE DU GARAGE",
        "style": {
            "stroke": "#92d04f",
            "fill": "#e3f3d3",
            "fill-opacity": "0.5",
            "label": true
        },
        "nodes": [
            "fc9f24706d45813a",
            "9a0e45e1b57bc1fb",
            "6d4f01210accf76a",
            "9d18b552cea2ee7e",
            "452865e55753d209",
            "d9a887718b1f0026",
            "e6045525d7486c77",
            "e3867221e23a926b",
            "b1201f0e9e49e643",
            "fb99043b8e1ddfa6",
            "6309748fb18cc90c",
            "fd42dc7861c2b385",
            "a638391f58a6ff7a",
            "e37de51f12186f8b",
            "2796f4918ce03681"
        ],
        "x": 94,
        "y": 319,
        "w": 1532,
        "h": 402
    },
    {
        "id": "ca62cd67af546d95",
        "type": "group",
        "z": "75e3af83e1a079d2",
        "name": "",
        "style": {
            "stroke": "#addb7b",
            "fill": "#e3f3d3",
            "fill-opacity": "0.41",
            "label": true
        },
        "nodes": [
            "d0e451d7cbb9a179",
            "29f57eca3b8bbe60",
            "e2c2e3abacec3413",
            "2499cf3ae93c4aac",
            "55e6d68e7e0c3df0",
            "0988252ec06c1917",
            "08bad88807ef9b58"
        ],
        "x": 54,
        "y": 399,
        "w": 1132,
        "h": 282
    },
    {
        "id": "072fa2fd3577f7cc",
        "type": "group",
        "z": "75e3af83e1a079d2",
        "name": "Notifications suivant état du portail",
        "style": {
            "fill": "#e3f3d3",
            "fill-opacity": "0.6",
            "label": true
        },
        "nodes": [
            "8d3eb1c537148e51",
            "ff9c7cfb44e5eff3",
            "48787fb57883765c",
            "eab28ddd72951a12",
            "81a0d7b7d96bd234",
            "eea81a50f0a71cb0",
            "5094bada9b522fb4",
            "2a59da1538979c06"
        ],
        "x": 54,
        "y": 759,
        "w": 972,
        "h": 322
    },
    {
        "id": "9fcdce9a6ae5a6e3",
        "type": "group",
        "z": "75e3af83e1a079d2",
        "name": "Notifications suivant état de la porte de garage",
        "style": {
            "fill": "#e3f3d3",
            "fill-opacity": "0.6",
            "label": true
        },
        "nodes": [
            "8afe1e54c7691bee",
            "453f38d8301a4304",
            "26fd0c98112ef5d4",
            "8870ac7f5a5f66b7",
            "a659802535ae657e"
        ],
        "x": 54,
        "y": 1139,
        "w": 1052,
        "h": 202
    },
    {
        "id": "df7e9235e0741f5a",
        "type": "group",
        "z": "75e3af83e1a079d2",
        "name": "",
        "style": {
            "stroke": "#777777",
            "label": true,
            "fill": "#e3f3d3",
            "fill-opacity": "0.5"
        },
        "nodes": [
            "14b0ef41c95a19d9",
            "4728e0ffe589df40"
        ],
        "x": 54,
        "y": 1379,
        "w": 792,
        "h": 122
    },
    {
        "id": "e3646ad3d7ab0bc7",
        "type": "group",
        "z": "d38a632520fcc2d9",
        "name": "",
        "style": {
            "stroke": "#ff3f3f",
            "fill": "#ffbfbf",
            "fill-opacity": "0.47",
            "label": true
        },
        "nodes": [
            "785d1aca409d97ef",
            "9779940fa16b0a23",
            "2a58bc97635a36f7",
            "91365ffe8d085439",
            "f5f78a8199f99c7c",
            "b6b89ca6766e58a7",
            "e0dd3cab58381ace",
            "82ca5df479c97c2c",
            "539b28f6c883e258",
            "72e02e4c40f4d01e",
            "61898786b76b5af6",
            "cbe8daaf954c90bc",
            "d5ecd7e099f915d5",
            "94ad592446115235",
            "c86b0152b1535977"
        ],
        "x": 54,
        "y": 599,
        "w": 1432,
        "h": 542
    },
    {
        "id": "863bccb7da188f3c",
        "type": "group",
        "z": "c7f096e10163bb26",
        "name": "1er Étage - WC - LUMIÈRE - Détection",
        "style": {
            "fill": "#ffffbf",
            "fill-opacity": "0.6",
            "label": true
        },
        "nodes": [
            "3fe4887c5e48d279",
            "308c1bbd6ac0df64",
            "babe5784a6a053ab",
            "ab65e943d61c0312",
            "e268e0bb882fe79c",
            "1092aa2db91b6440",
            "b019be78b1aed509",
            "19bc7cdd593d6610",
            "1564b3bedc8df885",
            "382fec96cd3ba423",
            "359c809c125caff4",
            "3a95aec310d4f7e6",
            "6cfd8e85bb5ce37f"
        ],
        "x": 84,
        "y": 539,
        "w": 1162,
        "h": 382
    },
    {
        "id": "b024aaeee2b5d9fe",
        "type": "group",
        "z": "8542eae0a2ca9603",
        "name": "",
        "style": {
            "stroke": "#7fb7df",
            "fill": "#bfdbef",
            "fill-opacity": "0.5",
            "label": true
        },
        "nodes": [
            "7f3ba56a75074c1d",
            "84ef4a0e20049a81",
            "b8f1a038a10e3032",
            "6d7163e7754ef673",
            "fdba5d9d54c0fc1a",
            "6f71f34ac54cf4b9",
            "d7a77375853efc63",
            "01a9d4e25b276cac"
        ],
        "x": 54,
        "y": 39,
        "w": 1692,
        "h": 382
    },
    {
        "id": "67f9f8146a54c570",
        "type": "server",
        "name": "Home Assistant",
        "version": 5,
        "addon": false,
        "rejectUnauthorizedCerts": true,
        "ha_boolean": "y|yes|true|on|home|open",
        "connectionDelay": true,
        "cacheJson": false,
        "heartbeat": false,
        "heartbeatInterval": "30",
        "areaSelector": "friendlyName",
        "deviceSelector": "friendlyName",
        "entitySelector": "friendlyName",
        "statusSeparator": "at: ",
        "statusYear": "hidden",
        "statusMonth": "short",
        "statusDay": "numeric",
        "statusHourCycle": "h23",
        "statusTimeFormat": "h:m",
        "enableGlobalContextStore": true
    },
    {
        "id": "eb336256f20922f9",
        "type": "mqtt-broker",
        "name": "NUC MQTT Broker",
        "broker": "192.168.10.20",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "autoUnsubscribe": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "3d3aec077e3a2c6d",
        "type": "zigbee2mqtt-server",
        "name": "Zigbee2MQTT",
        "host": "192.168.10.20",
        "mqtt_port": "1883",
        "mqtt_username": "hass",
        "mqtt_password": "cz9$8tEE9X-^",
        "mqtt_qos": "0",
        "tls": "",
        "usetls": false,
        "base_topic": "zigbee2mqtt"
    },
    {
        "id": "925d7d4f5be9d355",
        "type": "api-call-service",
        "z": "c7f096e10163bb26",
        "g": "8f5d27ba3f5554b8",
        "name": "Lustre WC - OFF",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.xiaomi_aqara_smartledbulb_toilet"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1110,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "b311b044dd65683c",
        "type": "comment",
        "z": "c7f096e10163bb26",
        "g": "8f5d27ba3f5554b8",
        "name": "Détection de mouvement au WC",
        "info": "",
        "x": 230,
        "y": 260,
        "wires": []
    },
    {
        "id": "d0f7d4a5922b3d2c",
        "type": "comment",
        "z": "c7f096e10163bb26",
        "g": "8f5d27ba3f5554b8",
        "name": "Soirée (entre 22:30 et 07:30)",
        "info": "",
        "x": 820,
        "y": 100,
        "wires": []
    },
    {
        "id": "3972e45a7e988a20",
        "type": "comment",
        "z": "c7f096e10163bb26",
        "g": "8f5d27ba3f5554b8",
        "name": "Non - Pas de détection",
        "info": "",
        "x": 900,
        "y": 360,
        "wires": []
    },
    {
        "id": "91c88edd25deafdc",
        "type": "api-call-service",
        "z": "c7f096e10163bb26",
        "g": "8f5d27ba3f5554b8",
        "name": "Lustre WC - ON",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.xiaomi_aqara_smartledbulb_toilet"
        ],
        "data": "{\"brightness\": 15,\"color_temp\": 370, \"transition\": 0}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "str"
            }
        ],
        "queue": "none",
        "x": 780,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "bbfb17536196674a",
        "type": "comment",
        "z": "c7f096e10163bb26",
        "g": "8f5d27ba3f5554b8",
        "name": "Journée (entre 07:30 et 22:30)",
        "info": "",
        "x": 820,
        "y": 220,
        "wires": []
    },
    {
        "id": "f6e385ce4910c357",
        "type": "function",
        "z": "c7f096e10163bb26",
        "d": true,
        "g": "8f5d27ba3f5554b8",
        "name": "",
        "func": "var dt = new Date();\n\nvar startTime = '00:00:00';\nvar endTime = '07:45:00';\n\nvar s =  startTime.split(':');\nvar dt1 = new Date(dt.getFullYear(), dt.getMonth(), dt.getDate(), parseInt(s[0]), parseInt(s[1]), parseInt(s[2]));\n\nvar e =  endTime.split(':');\nvar dt2 = new Date(dt.getFullYear(), dt.getMonth(), dt.getDate(),parseInt(e[0]), parseInt(e[1]), parseInt(e[2]));\n\nif(dt >= dt1 && dt <= dt2) {\n    msg.payload = 'Current time is between startTime and endTime';\n    msg.payload.data = '{\"brightness\": 1,\"color_temp\": 370, \"transition\": 5}';\n    //msg.payload.data.brightness = 1;\n    //msg.payload.data.color_temp = 370;\n    //msg.payload.data.transition = 5;\n} else {\n    msg.payload = 'Current time is NOT between startTime and endTime';\n    msg.payload.data = '{\"brightness\": 100,\"color_temp\": 200}';\n    //msg.payload.data.brightness = 100;\n    //msg.payload.data.color_temp = 200;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 520,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "4fc1cd124c3cbbce",
        "type": "api-call-service",
        "z": "c7f096e10163bb26",
        "g": "8f5d27ba3f5554b8",
        "name": "Lustre WC - ON",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.xiaomi_aqara_smartledbulb_toilet"
        ],
        "data": "{\"brightness\": 200,\"color_temp\": 200, \"transition\": 0}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "str"
            }
        ],
        "queue": "none",
        "x": 780,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "01b0aff8b308b646",
        "type": "time-range-switch",
        "z": "c7f096e10163bb26",
        "g": "8f5d27ba3f5554b8",
        "name": "",
        "lat": "45.509909",
        "lon": "4.898678",
        "startTime": "dusk",
        "endTime": "dawn",
        "startOffset": 0,
        "endOffset": "90",
        "x": 530,
        "y": 200,
        "wires": [
            [
                "91c88edd25deafdc"
            ],
            [
                "4fc1cd124c3cbbce"
            ]
        ]
    },
    {
        "id": "27252ce04f9ef701",
        "type": "delay",
        "z": "c7f096e10163bb26",
        "g": "8f5d27ba3f5554b8",
        "name": "",
        "pauseType": "delay",
        "timeout": "0",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 880,
        "y": 400,
        "wires": [
            [
                "925d7d4f5be9d355"
            ]
        ]
    },
    {
        "id": "d34337201e513d90",
        "type": "server-state-changed",
        "z": "c7f096e10163bb26",
        "g": "8f5d27ba3f5554b8",
        "name": "WC - Motion",
        "server": "67f9f8146a54c570",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.mmwave_wc_occupancy_sensor",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 170,
        "y": 300,
        "wires": [
            [
                "01b0aff8b308b646"
            ],
            [
                "27252ce04f9ef701"
            ]
        ]
    },
    {
        "id": "3fe4887c5e48d279",
        "type": "api-call-service",
        "z": "c7f096e10163bb26",
        "g": "863bccb7da188f3c",
        "name": "Lustre WC - OFF",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.ikea_tradfri_bulb_library_window"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1130,
        "y": 880,
        "wires": [
            []
        ]
    },
    {
        "id": "308c1bbd6ac0df64",
        "type": "comment",
        "z": "c7f096e10163bb26",
        "g": "863bccb7da188f3c",
        "name": "Détection de mouvement au WC",
        "info": "",
        "x": 250,
        "y": 740,
        "wires": []
    },
    {
        "id": "babe5784a6a053ab",
        "type": "comment",
        "z": "c7f096e10163bb26",
        "g": "863bccb7da188f3c",
        "name": "Soirée (entre 22:30 et 07:30)",
        "info": "",
        "x": 840,
        "y": 580,
        "wires": []
    },
    {
        "id": "ab65e943d61c0312",
        "type": "comment",
        "z": "c7f096e10163bb26",
        "g": "863bccb7da188f3c",
        "name": "Non - Pas de détection",
        "info": "",
        "x": 920,
        "y": 840,
        "wires": []
    },
    {
        "id": "e268e0bb882fe79c",
        "type": "api-call-service",
        "z": "c7f096e10163bb26",
        "g": "863bccb7da188f3c",
        "name": "Lustre WC - ON",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.ikea_tradfri_bulb_library_window"
        ],
        "data": "{\"brightness_pct\":100,\"kelvin\":3500}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "str"
            }
        ],
        "queue": "none",
        "x": 800,
        "y": 620,
        "wires": [
            []
        ]
    },
    {
        "id": "1092aa2db91b6440",
        "type": "comment",
        "z": "c7f096e10163bb26",
        "g": "863bccb7da188f3c",
        "name": "Journée (entre 07:30 et 22:30)",
        "info": "",
        "x": 840,
        "y": 700,
        "wires": []
    },
    {
        "id": "b019be78b1aed509",
        "type": "function",
        "z": "c7f096e10163bb26",
        "d": true,
        "g": "863bccb7da188f3c",
        "name": "",
        "func": "var dt = new Date();\n\nvar startTime = '00:00:00';\nvar endTime = '07:45:00';\n\nvar s =  startTime.split(':');\nvar dt1 = new Date(dt.getFullYear(), dt.getMonth(), dt.getDate(), parseInt(s[0]), parseInt(s[1]), parseInt(s[2]));\n\nvar e =  endTime.split(':');\nvar dt2 = new Date(dt.getFullYear(), dt.getMonth(), dt.getDate(),parseInt(e[0]), parseInt(e[1]), parseInt(e[2]));\n\nif(dt >= dt1 && dt <= dt2) {\n    msg.payload = 'Current time is between startTime and endTime';\n    msg.payload.data = '{\"brightness\": 1,\"color_temp\": 370, \"transition\": 5}';\n    //msg.payload.data.brightness = 1;\n    //msg.payload.data.color_temp = 370;\n    //msg.payload.data.transition = 5;\n} else {\n    msg.payload = 'Current time is NOT between startTime and endTime';\n    msg.payload.data = '{\"brightness\": 100,\"color_temp\": 200}';\n    //msg.payload.data.brightness = 100;\n    //msg.payload.data.color_temp = 200;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 640,
        "wires": [
            []
        ]
    },
    {
        "id": "19bc7cdd593d6610",
        "type": "api-call-service",
        "z": "c7f096e10163bb26",
        "g": "863bccb7da188f3c",
        "name": "Lustre WC - ON",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.ikea_tradfri_bulb_library_window"
        ],
        "data": "{\"brightness_pct\":85,\"kelvin\":2750}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "str"
            }
        ],
        "queue": "none",
        "x": 800,
        "y": 740,
        "wires": [
            []
        ]
    },
    {
        "id": "1564b3bedc8df885",
        "type": "time-range-switch",
        "z": "c7f096e10163bb26",
        "g": "863bccb7da188f3c",
        "name": "",
        "lat": "45.509909",
        "lon": "4.898678",
        "startTime": "dusk",
        "endTime": "dawn",
        "startOffset": 0,
        "endOffset": "90",
        "x": 550,
        "y": 680,
        "wires": [
            [
                "e268e0bb882fe79c"
            ],
            [
                "19bc7cdd593d6610"
            ]
        ]
    },
    {
        "id": "382fec96cd3ba423",
        "type": "delay",
        "z": "c7f096e10163bb26",
        "g": "863bccb7da188f3c",
        "name": "",
        "pauseType": "delay",
        "timeout": "0",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 900,
        "y": 880,
        "wires": [
            [
                "3fe4887c5e48d279"
            ]
        ]
    },
    {
        "id": "359c809c125caff4",
        "type": "server-state-changed",
        "z": "c7f096e10163bb26",
        "d": true,
        "g": "863bccb7da188f3c",
        "name": "WC - 1er étage - Motion ",
        "server": "67f9f8146a54c570",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.sonoff_human_presence_occupancy_toilet_firstfloor_occupancy",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 220,
        "y": 780,
        "wires": [
            [
                "1564b3bedc8df885",
                "3a95aec310d4f7e6"
            ],
            [
                "382fec96cd3ba423",
                "6cfd8e85bb5ce37f"
            ]
        ]
    },
    {
        "id": "8ca98a17df9b4c5d",
        "type": "debug",
        "z": "c7f096e10163bb26",
        "g": "8f5d27ba3f5554b8",
        "name": "debug 9",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 380,
        "y": 380,
        "wires": []
    },
    {
        "id": "16c96ffc3c5e8253",
        "type": "debug",
        "z": "c7f096e10163bb26",
        "g": "8f5d27ba3f5554b8",
        "name": "debug 10",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 380,
        "y": 440,
        "wires": []
    },
    {
        "id": "8a04f4acba19d67f",
        "type": "server-state-changed",
        "z": "c7f096e10163bb26",
        "d": true,
        "g": "8f5d27ba3f5554b8",
        "name": "WC - RDC - Motion ",
        "server": "67f9f8146a54c570",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.sonoff_human_presence_occupancy_toilet_groundfloor_occupancy",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 170,
        "y": 400,
        "wires": [
            [
                "8ca98a17df9b4c5d",
                "01b0aff8b308b646"
            ],
            [
                "16c96ffc3c5e8253",
                "27252ce04f9ef701"
            ]
        ]
    },
    {
        "id": "3a95aec310d4f7e6",
        "type": "debug",
        "z": "c7f096e10163bb26",
        "g": "863bccb7da188f3c",
        "name": "debug 11",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 400,
        "y": 840,
        "wires": []
    },
    {
        "id": "6cfd8e85bb5ce37f",
        "type": "debug",
        "z": "c7f096e10163bb26",
        "g": "863bccb7da188f3c",
        "name": "debug 12",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 400,
        "y": 880,
        "wires": []
    },
    {
        "id": "2f8304c3ba4d9000",
        "type": "server-state-changed",
        "z": "3fa7bc2ec3251969",
        "name": "Aqara ceiling light L1-350 - Couloir",
        "server": "67f9f8146a54c570",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "light.xiaomi_aqara_ceiling_light_hallway",
        "entityIdType": "exact",
        "outputInitially": true,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": true,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 280,
        "y": 260,
        "wires": [
            [
                "15415347f08e3192"
            ],
            []
        ]
    },
    {
        "id": "13daba03f38f4582",
        "type": "debug",
        "z": "3fa7bc2ec3251969",
        "name": "debug 7",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1000,
        "y": 160,
        "wires": []
    },
    {
        "id": "a3ef3fd982bcc90e",
        "type": "debug",
        "z": "3fa7bc2ec3251969",
        "name": "debug 8",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1200,
        "y": 300,
        "wires": []
    },
    {
        "id": "15415347f08e3192",
        "type": "time-range-switch",
        "z": "3fa7bc2ec3251969",
        "name": "",
        "lat": "45.509909",
        "lon": "4.898678",
        "startTime": "08:00",
        "endTime": "dusk",
        "startOffset": 0,
        "endOffset": "0",
        "x": 750,
        "y": 200,
        "wires": [
            [
                "13daba03f38f4582"
            ],
            [
                "7d841d30030ab1a0"
            ]
        ]
    },
    {
        "id": "f50886e05855eb4a",
        "type": "comment",
        "z": "3fa7bc2ec3251969",
        "name": "Du crépuscule à 23h45",
        "info": "",
        "x": 1240,
        "y": 260,
        "wires": []
    },
    {
        "id": "7d841d30030ab1a0",
        "type": "time-range-switch",
        "z": "3fa7bc2ec3251969",
        "name": "",
        "lat": "45.509909",
        "lon": "4.898678",
        "startTime": "dusk",
        "endTime": "23:45",
        "startOffset": 0,
        "endOffset": "0",
        "x": 1010,
        "y": 320,
        "wires": [
            [
                "a3ef3fd982bcc90e",
                "94311b39960b4967"
            ],
            []
        ]
    },
    {
        "id": "94311b39960b4967",
        "type": "api-call-service",
        "z": "3fa7bc2ec3251969",
        "name": "Luminaires - Couloir",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [
            "0bab6aa0aa84895fcdc0b361fd231843",
            "7339ac3cb48d12ec1e95379ff8127874"
        ],
        "entityId": [],
        "data": "{\"brightness\":100,\"color_temp\":300,\"transition\":0}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1320,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "7f3ba56a75074c1d",
        "type": "switch",
        "z": "8542eae0a2ca9603",
        "g": "b024aaeee2b5d9fe",
        "name": "Switch",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "cover_off",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "cover_on",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1310,
        "y": 240,
        "wires": [
            [],
            [
                "6d7163e7754ef673"
            ]
        ]
    },
    {
        "id": "84ef4a0e20049a81",
        "type": "comment",
        "z": "8542eae0a2ca9603",
        "g": "b024aaeee2b5d9fe",
        "name": "1er ÉTAGE - GESTION DES VOLETS ROULANTS",
        "info": "",
        "x": 270,
        "y": 80,
        "wires": []
    },
    {
        "id": "b8f1a038a10e3032",
        "type": "eztimer",
        "z": "8542eae0a2ca9603",
        "g": "b024aaeee2b5d9fe",
        "name": "À 7h30, les jours de semaine",
        "debug": false,
        "autoname": "07:30",
        "tag": "eztimer",
        "topic": "",
        "suspended": false,
        "sendEventsOnSuspend": false,
        "latLongSource": "manual",
        "latLongHaZone": "zone.home",
        "lat": "45.50992",
        "lon": "4.89875",
        "timerType": "2",
        "startupMessage": true,
        "ontype": "2",
        "ontimesun": "sunsetStart",
        "ontimetod": "07:30",
        "onpropertytype": "msg",
        "onproperty": "payload",
        "onvaluetype": "str",
        "onvalue": "cover_on",
        "onoffset": "0",
        "onrandomoffset": 0,
        "onsuppressrepeats": false,
        "offtype": "9",
        "offtimesun": "dusk",
        "offtimetod": "dusk",
        "offduration": "00:01:00",
        "offpropertytype": "msg",
        "offproperty": "payload",
        "offvaluetype": "num",
        "offvalue": 0,
        "offoffset": 0,
        "offrandomoffset": 0,
        "offsuppressrepeats": true,
        "resend": false,
        "resendInterval": "0s",
        "mon": true,
        "tue": true,
        "wed": false,
        "thu": true,
        "fri": true,
        "sat": false,
        "sun": false,
        "x": 280,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "6d7163e7754ef673",
        "type": "api-call-service",
        "z": "8542eae0a2ca9603",
        "g": "b024aaeee2b5d9fe",
        "name": "OUVERTURE DES VOLETS ROULANTS",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "cover",
        "service": "open_cover",
        "areaId": [],
        "deviceId": [
            "d4f2707eb6801cedf2a87db629bfcd80",
            "67100aaaa4f20af53a4e3db84f25e8cc",
            "15bb6ffdf419731f5886406f9002e352"
        ],
        "entityId": [],
        "data": "{}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1560,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "fdba5d9d54c0fc1a",
        "type": "switch",
        "z": "8542eae0a2ca9603",
        "g": "b024aaeee2b5d9fe",
        "name": "Si ce n'est pas les vacances !",
        "property": "payload.coversAction",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "openOrclose",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1110,
        "y": 180,
        "wires": [
            [
                "7f3ba56a75074c1d"
            ]
        ]
    },
    {
        "id": "6f71f34ac54cf4b9",
        "type": "function",
        "z": "8542eae0a2ca9603",
        "g": "b024aaeee2b5d9fe",
        "name": "is holidays ?",
        "func": "if(msg.payload.isSchoolHolidays == true || msg.payload.isPublicHoliday == true) {\n    msg.payload.coversAction = 'none';\n} else {\n    msg.payload.coversAction = 'openOrclose';\n}\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 240,
        "wires": [
            [
                "fdba5d9d54c0fc1a"
            ]
        ]
    },
    {
        "id": "d7a77375853efc63",
        "type": "eztimer",
        "z": "8542eae0a2ca9603",
        "g": "b024aaeee2b5d9fe",
        "name": "Coucher de soleil moins 25 minutes",
        "debug": false,
        "autoname": "sunsetStart",
        "tag": "eztimer",
        "topic": "",
        "suspended": false,
        "sendEventsOnSuspend": false,
        "latLongSource": "manual",
        "latLongHaZone": "zone.home",
        "lat": "45.50992",
        "lon": "4.89875",
        "timerType": "2",
        "startupMessage": true,
        "ontype": "1",
        "ontimesun": "sunsetStart",
        "ontimetod": "17:00",
        "onpropertytype": "msg",
        "onproperty": "payload",
        "onvaluetype": "str",
        "onvalue": "cover_off",
        "onoffset": "-25",
        "onrandomoffset": 0,
        "onsuppressrepeats": false,
        "offtype": "9",
        "offtimesun": "dusk",
        "offtimetod": "dusk",
        "offduration": "00:01:00",
        "offpropertytype": "msg",
        "offproperty": "payload",
        "offvaluetype": "num",
        "offvalue": 0,
        "offoffset": 0,
        "offrandomoffset": 0,
        "offsuppressrepeats": true,
        "resend": false,
        "resendInterval": "0s",
        "mon": true,
        "tue": true,
        "wed": true,
        "thu": true,
        "fri": true,
        "sat": true,
        "sun": true,
        "x": 250,
        "y": 380,
        "wires": [
            [
                "01a9d4e25b276cac"
            ]
        ]
    },
    {
        "id": "01a9d4e25b276cac",
        "type": "api-call-service",
        "z": "8542eae0a2ca9603",
        "g": "b024aaeee2b5d9fe",
        "name": "FERMETURE DES VOLETS ROULANTS",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "cover",
        "service": "close_cover",
        "areaId": [],
        "deviceId": [
            "d4f2707eb6801cedf2a87db629bfcd80",
            "67100aaaa4f20af53a4e3db84f25e8cc",
            "15bb6ffdf419731f5886406f9002e352"
        ],
        "entityId": [],
        "data": "{}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 640,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "5134cc6cfacbfb13",
        "type": "server-state-changed",
        "z": "1f44f5626a6cdfbe",
        "g": "ba56e8ea68618e11",
        "name": "Garage Wireless Switch",
        "server": "67f9f8146a54c570",
        "version": 5,
        "outputs": 1,
        "exposeAsEntityConfig": "",
        "entityId": "sensor.xiaomi_aqara_wireless_switch_garage_action",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 180,
        "y": 220,
        "wires": [
            [
                "cefc512de73a647a"
            ]
        ]
    },
    {
        "id": "cefc512de73a647a",
        "type": "switch",
        "z": "1f44f5626a6cdfbe",
        "g": "ba56e8ea68618e11",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "single",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "double",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "hold",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "release",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 4,
        "x": 530,
        "y": 220,
        "wires": [
            [
                "ce30b2d8eeb9349a"
            ],
            [],
            [
                "ae459bd3134a30e4"
            ],
            [
                "ccabbd70f8a8f903"
            ]
        ]
    },
    {
        "id": "ff251351ecf1ebc4",
        "type": "comment",
        "z": "1f44f5626a6cdfbe",
        "g": "ba56e8ea68618e11",
        "name": "Single",
        "info": "",
        "x": 730,
        "y": 100,
        "wires": []
    },
    {
        "id": "ce30b2d8eeb9349a",
        "type": "api-call-service",
        "z": "1f44f5626a6cdfbe",
        "g": "ba56e8ea68618e11",
        "name": "Allume la lumière",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "toggle",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.loratap_bulb_socket_lamp_adapter_garage"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 770,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "a812ffb1dc676ee9",
        "type": "comment",
        "z": "1f44f5626a6cdfbe",
        "g": "ba56e8ea68618e11",
        "name": "Release",
        "info": "",
        "x": 740,
        "y": 420,
        "wires": []
    },
    {
        "id": "ccabbd70f8a8f903",
        "type": "api-call-service",
        "z": "1f44f5626a6cdfbe",
        "d": true,
        "g": "ba56e8ea68618e11",
        "name": "Eteint la lumière",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.loratap_bulb_socket_lamp_adapter_garage"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 760,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "36d494d3b05a17c5",
        "type": "comment",
        "z": "1f44f5626a6cdfbe",
        "g": "ba56e8ea68618e11",
        "name": "Hold",
        "info": "",
        "x": 730,
        "y": 320,
        "wires": []
    },
    {
        "id": "ae459bd3134a30e4",
        "type": "api-call-service",
        "z": "1f44f5626a6cdfbe",
        "g": "ba56e8ea68618e11",
        "name": "Allume la lumière",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.loratap_bulb_socket_lamp_adapter_garage"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 770,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "f83d064788e3054c",
        "type": "comment",
        "z": "1f44f5626a6cdfbe",
        "g": "ba56e8ea68618e11",
        "name": "Interrupteur Aqara",
        "info": "",
        "x": 170,
        "y": 180,
        "wires": []
    },
    {
        "id": "70508fc8602632f1",
        "type": "comment",
        "z": "1f44f5626a6cdfbe",
        "g": "ba56e8ea68618e11",
        "name": "Double",
        "info": "",
        "x": 730,
        "y": 200,
        "wires": []
    },
    {
        "id": "2472395ca293c7be",
        "type": "server-state-changed",
        "z": "03fd71f1c4da7b69",
        "g": "e49a024a3d2d324e",
        "name": "Capteur d'ouverture - Portail",
        "server": "67f9f8146a54c570",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.xiaomi_aqara_doorwindow_sensor_portal_contact",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "",
        "forType": "num",
        "forUnits": "seconds",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 240,
        "y": 180,
        "wires": [
            [
                "a9d8346ac1438db8"
            ],
            []
        ]
    },
    {
        "id": "fd22e0b89837f546",
        "type": "api-call-service",
        "z": "03fd71f1c4da7b69",
        "g": "e49a024a3d2d324e",
        "name": "Allume l'éclairage extérieur ",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.sonoff_smart_switch_module_garage"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 840,
        "y": 180,
        "wires": [
            [
                "4d5c51082a1328c4"
            ]
        ]
    },
    {
        "id": "88484b79177a6d01",
        "type": "api-call-service",
        "z": "03fd71f1c4da7b69",
        "g": "e49a024a3d2d324e",
        "name": "Éteint l'éclairage extérieur ",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.sonoff_smart_switch_module_garage"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1470,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "a9d8346ac1438db8",
        "type": "time-range-switch",
        "z": "03fd71f1c4da7b69",
        "g": "e49a024a3d2d324e",
        "name": "",
        "lat": "45.509909",
        "lon": "4.898678",
        "startTime": "dusk",
        "endTime": "dawn",
        "startOffset": 0,
        "endOffset": 0,
        "x": 550,
        "y": 180,
        "wires": [
            [
                "fd22e0b89837f546"
            ],
            []
        ]
    },
    {
        "id": "940b78280a93adf2",
        "type": "comment",
        "z": "03fd71f1c4da7b69",
        "g": "e49a024a3d2d324e",
        "name": "Portail ouvert",
        "info": "",
        "x": 550,
        "y": 140,
        "wires": []
    },
    {
        "id": "4d5c51082a1328c4",
        "type": "delay",
        "z": "03fd71f1c4da7b69",
        "g": "e49a024a3d2d324e",
        "name": "",
        "pauseType": "delay",
        "timeout": "180",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1170,
        "y": 180,
        "wires": [
            [
                "88484b79177a6d01"
            ]
        ]
    },
    {
        "id": "fc9f24706d45813a",
        "type": "server-state-changed",
        "z": "03fd71f1c4da7b69",
        "g": "3838449281fd224d",
        "name": "Capteur d'ouverture - Porte de garage",
        "server": "67f9f8146a54c570",
        "version": 5,
        "outputs": 1,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.xiaomi_aqara_doorwindow_sensor_garage_contact",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "seconds",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 270,
        "y": 500,
        "wires": [
            [
                "d9a887718b1f0026"
            ]
        ]
    },
    {
        "id": "9a0e45e1b57bc1fb",
        "type": "time-range-switch",
        "z": "03fd71f1c4da7b69",
        "g": "3838449281fd224d",
        "name": "",
        "lat": "45.509909",
        "lon": "4.898678",
        "startTime": "dusk",
        "endTime": "dawn",
        "startOffset": 0,
        "endOffset": 0,
        "x": 950,
        "y": 400,
        "wires": [
            [
                "e37de51f12186f8b"
            ],
            [
                "e6045525d7486c77"
            ]
        ]
    },
    {
        "id": "6d4f01210accf76a",
        "type": "api-call-service",
        "z": "03fd71f1c4da7b69",
        "g": "3838449281fd224d",
        "name": "Allume l'éclairage extérieur ",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.sonoff_smart_switch_module_garage"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1480,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "9d18b552cea2ee7e",
        "type": "switch",
        "z": "03fd71f1c4da7b69",
        "g": "3838449281fd224d",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "open",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "closed",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 770,
        "y": 500,
        "wires": [
            [
                "9a0e45e1b57bc1fb"
            ],
            [
                "b1201f0e9e49e643"
            ]
        ]
    },
    {
        "id": "452865e55753d209",
        "type": "comment",
        "z": "03fd71f1c4da7b69",
        "g": "3838449281fd224d",
        "name": "On écoute l'état du capteur",
        "info": "",
        "x": 230,
        "y": 460,
        "wires": []
    },
    {
        "id": "d9a887718b1f0026",
        "type": "change",
        "z": "03fd71f1c4da7b69",
        "g": "3838449281fd224d",
        "name": "",
        "rules": [
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "on",
                "fromt": "str",
                "to": "open",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "off",
                "fromt": "str",
                "to": "closed",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 580,
        "y": 500,
        "wires": [
            [
                "9d18b552cea2ee7e"
            ]
        ]
    },
    {
        "id": "e6045525d7486c77",
        "type": "debug",
        "z": "03fd71f1c4da7b69",
        "g": "3838449281fd224d",
        "name": "Il fait jour !",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1190,
        "y": 440,
        "wires": []
    },
    {
        "id": "e3867221e23a926b",
        "type": "comment",
        "z": "03fd71f1c4da7b69",
        "g": "3838449281fd224d",
        "name": "on = open | off = closed",
        "info": "",
        "x": 580,
        "y": 460,
        "wires": []
    },
    {
        "id": "b1201f0e9e49e643",
        "type": "time-range-switch",
        "z": "03fd71f1c4da7b69",
        "g": "3838449281fd224d",
        "name": "",
        "lat": "45.509909",
        "lon": "4.898678",
        "startTime": "dusk",
        "endTime": "dawn",
        "startOffset": 0,
        "endOffset": 0,
        "x": 950,
        "y": 620,
        "wires": [
            [
                "6309748fb18cc90c"
            ],
            [
                "fb99043b8e1ddfa6"
            ]
        ]
    },
    {
        "id": "fb99043b8e1ddfa6",
        "type": "debug",
        "z": "03fd71f1c4da7b69",
        "g": "3838449281fd224d",
        "name": "Il fait jour !",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1190,
        "y": 680,
        "wires": []
    },
    {
        "id": "6309748fb18cc90c",
        "type": "api-call-service",
        "z": "03fd71f1c4da7b69",
        "g": "3838449281fd224d",
        "name": "Éteint l'éclairage extérieur ",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.sonoff_smart_switch_module_garage"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1230,
        "y": 600,
        "wires": [
            []
        ]
    },
    {
        "id": "fd42dc7861c2b385",
        "type": "comment",
        "z": "03fd71f1c4da7b69",
        "g": "3838449281fd224d",
        "name": "on = open",
        "info": "",
        "x": 940,
        "y": 360,
        "wires": []
    },
    {
        "id": "a638391f58a6ff7a",
        "type": "comment",
        "z": "03fd71f1c4da7b69",
        "g": "3838449281fd224d",
        "name": "off = closed",
        "info": "",
        "x": 950,
        "y": 580,
        "wires": []
    },
    {
        "id": "e37de51f12186f8b",
        "type": "api-current-state",
        "z": "03fd71f1c4da7b69",
        "g": "3838449281fd224d",
        "name": "Smart Switch On",
        "server": "67f9f8146a54c570",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "switch.sonoff_smart_switch_module_garage",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 1210,
        "y": 360,
        "wires": [
            [],
            [
                "6d4f01210accf76a"
            ]
        ]
    },
    {
        "id": "2796f4918ce03681",
        "type": "comment",
        "z": "03fd71f1c4da7b69",
        "g": "3838449281fd224d",
        "name": "Gestion de la luminosité",
        "info": "",
        "x": 960,
        "y": 500,
        "wires": []
    },
    {
        "id": "edd13d5c94cafb55",
        "type": "api-call-service",
        "z": "75e3af83e1a079d2",
        "g": "4b847a0eb28caa8a",
        "name": "Notify All Members",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "all_hass_members",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t   \"title\":\"Alfred 🧹\",\t   \"message\": \"La batterie d'Allfred est à moins de 20% ⚠️⚠️⚠️\",\t   \"data\": {\t       \"channel\": \"Alert\",\t       \"importance\": \"high\",\t       \"ledColor\": \"#00ced1\"\t    }\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 670,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "26671504dced3c18",
        "type": "comment",
        "z": "75e3af83e1a079d2",
        "g": "4b847a0eb28caa8a",
        "name": "Allfred Battery Level Phone Notification",
        "info": "",
        "x": 670,
        "y": 120,
        "wires": []
    },
    {
        "id": "9e1c3abd780937b1",
        "type": "server-state-changed",
        "z": "75e3af83e1a079d2",
        "g": "4b847a0eb28caa8a",
        "name": "Alfred Battery Level",
        "server": "67f9f8146a54c570",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "sensor.alfred_battery_level",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "num",
        "ifState": "20",
        "ifStateType": "num",
        "ifStateOperator": "lte",
        "outputOnlyOnStateChange": true,
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 190,
        "y": 160,
        "wires": [
            [
                "edd13d5c94cafb55"
            ],
            []
        ]
    },
    {
        "id": "8e402fc944b406f0",
        "type": "comment",
        "z": "75e3af83e1a079d2",
        "g": "4b847a0eb28caa8a",
        "name": "Alfred Battery Level <= 20%",
        "info": "",
        "x": 200,
        "y": 120,
        "wires": []
    },
    {
        "id": "8e67b5b7ae2d9ce2",
        "type": "server-state-changed",
        "z": "75e3af83e1a079d2",
        "g": "4b847a0eb28caa8a",
        "name": "Jeffrey Battery Level",
        "server": "67f9f8146a54c570",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "sensor.jeffrey_battery_level",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "num",
        "ifState": "20",
        "ifStateType": "num",
        "ifStateOperator": "lte",
        "outputOnlyOnStateChange": true,
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 190,
        "y": 280,
        "wires": [
            [
                "1ef1bcbc68c105db"
            ],
            []
        ]
    },
    {
        "id": "a4a6e7f9a998094c",
        "type": "comment",
        "z": "75e3af83e1a079d2",
        "g": "4b847a0eb28caa8a",
        "name": "Jeffrey Battery Level <= 20%",
        "info": "",
        "x": 200,
        "y": 240,
        "wires": []
    },
    {
        "id": "1ef1bcbc68c105db",
        "type": "api-call-service",
        "z": "75e3af83e1a079d2",
        "g": "4b847a0eb28caa8a",
        "name": "Notify All Members",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "all_hass_members",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t   \"title\":\"Jeffrey 🧹\",\t   \"message\": \"La batterie de Jeffery est à moins de 20% ⚠️⚠️⚠️\",\t   \"data\": {\t       \"channel\": \"Alert\",\t       \"importance\": \"high\",\t       \"ledColor\": \"#00ced1\"\t    }\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 670,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "a54d09c6fb24673d",
        "type": "comment",
        "z": "75e3af83e1a079d2",
        "g": "4b847a0eb28caa8a",
        "name": "Jeffrey Battery Level Phone Notification",
        "info": "",
        "x": 670,
        "y": 240,
        "wires": []
    },
    {
        "id": "d0e451d7cbb9a179",
        "type": "server-state-changed",
        "z": "75e3af83e1a079d2",
        "g": "ca62cd67af546d95",
        "name": "Mailbox Motion Detection",
        "server": "67f9f8146a54c570",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.sonoff_motion_sensor_mailbox_occupancy",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 190,
        "y": 560,
        "wires": [
            [
                "55e6d68e7e0c3df0"
            ],
            []
        ]
    },
    {
        "id": "29f57eca3b8bbe60",
        "type": "api-call-service",
        "z": "75e3af83e1a079d2",
        "g": "ca62cd67af546d95",
        "name": "Notify All Members",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "all_hass_members",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t    \"title\":\"Boîte aux lettres 📫\",\t    \"message\":\"Vous avez du courrier !\",\t    \"data\": {\t        \"channel\": \"Alert\",\t        \"importance\": \"high\",\t        \"ledColor\": \"#00ced1\"\t    }\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "on",
                "valueType": "str"
            }
        ],
        "queue": "none",
        "x": 810,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "e2c2e3abacec3413",
        "type": "comment",
        "z": "75e3af83e1a079d2",
        "g": "ca62cd67af546d95",
        "name": "Détection de mouvement",
        "info": "",
        "x": 190,
        "y": 520,
        "wires": []
    },
    {
        "id": "2499cf3ae93c4aac",
        "type": "comment",
        "z": "75e3af83e1a079d2",
        "g": "ca62cd67af546d95",
        "name": "Mailbox Phone Notification",
        "info": "",
        "x": 830,
        "y": 440,
        "wires": []
    },
    {
        "id": "55e6d68e7e0c3df0",
        "type": "time-range-switch",
        "z": "75e3af83e1a079d2",
        "g": "ca62cd67af546d95",
        "name": "",
        "lat": "45.509909",
        "lon": "4.898678",
        "startTime": "09:00",
        "endTime": "16:30",
        "startOffset": 0,
        "endOffset": 0,
        "x": 510,
        "y": 560,
        "wires": [
            [
                "29f57eca3b8bbe60"
            ],
            [
                "08bad88807ef9b58"
            ]
        ]
    },
    {
        "id": "0988252ec06c1917",
        "type": "api-call-service",
        "z": "75e3af83e1a079d2",
        "g": "ca62cd67af546d95",
        "name": "Notify All Members",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "all_hass_members",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t    \"title\":\"Boîte aux lettres 📫\",\t    \"message\":\"Relève du courrier !\",\t    \"data\": {\t        \"channel\": \"Alert\",\t        \"importance\": \"high\",\t        \"ledColor\": \"#00ced1\"\t    }\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "on",
                "valueType": "str"
            }
        ],
        "queue": "none",
        "x": 1070,
        "y": 640,
        "wires": [
            []
        ]
    },
    {
        "id": "08bad88807ef9b58",
        "type": "time-range-switch",
        "z": "75e3af83e1a079d2",
        "g": "ca62cd67af546d95",
        "name": "",
        "lat": "45.509909",
        "lon": "4.898678",
        "startTime": "16:30",
        "endTime": "22:30",
        "startOffset": 0,
        "endOffset": 0,
        "x": 790,
        "y": 640,
        "wires": [
            [
                "0988252ec06c1917"
            ],
            []
        ]
    },
    {
        "id": "8d3eb1c537148e51",
        "type": "server-state-changed",
        "z": "75e3af83e1a079d2",
        "g": "072fa2fd3577f7cc",
        "name": "Capteur d'ouverture - Portail",
        "server": "67f9f8146a54c570",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.xiaomi_aqara_doorwindow_sensor_portal_contact",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "60",
        "forType": "num",
        "forUnits": "seconds",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 200,
        "y": 860,
        "wires": [
            [
                "ff9c7cfb44e5eff3"
            ],
            [
                "eab28ddd72951a12"
            ]
        ]
    },
    {
        "id": "ff9c7cfb44e5eff3",
        "type": "api-call-service",
        "z": "75e3af83e1a079d2",
        "g": "072fa2fd3577f7cc",
        "name": "Notification groupée",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "all_hass_members",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t   \"title\":\"Portail 🚗\",\t   \"message\": \"Le portail est ouvert 🚪\",\t   \"data\": {\t       \"channel\": \"Alert\",\t       \"importance\": \"high\",\t       \"ledColor\": \"#00ced1\"\t    }\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 740,
        "y": 800,
        "wires": [
            []
        ]
    },
    {
        "id": "48787fb57883765c",
        "type": "comment",
        "z": "75e3af83e1a079d2",
        "g": "072fa2fd3577f7cc",
        "name": "Portail ouvert",
        "info": "",
        "x": 930,
        "y": 800,
        "wires": []
    },
    {
        "id": "eab28ddd72951a12",
        "type": "api-call-service",
        "z": "75e3af83e1a079d2",
        "g": "072fa2fd3577f7cc",
        "name": "Notification groupée",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "all_hass_members",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t   \"title\":\"Portail 🚗\",\t   \"message\": \"Le portail est fermé 🚪\",\t   \"data\": {\t       \"channel\": \"Alert\",\t       \"importance\": \"high\",\t       \"ledColor\": \"#00ced1\"\t    }\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 740,
        "y": 920,
        "wires": [
            []
        ]
    },
    {
        "id": "81a0d7b7d96bd234",
        "type": "comment",
        "z": "75e3af83e1a079d2",
        "g": "072fa2fd3577f7cc",
        "name": "Portail fermé",
        "info": "",
        "x": 930,
        "y": 920,
        "wires": []
    },
    {
        "id": "eea81a50f0a71cb0",
        "type": "server-state-changed",
        "z": "75e3af83e1a079d2",
        "g": "072fa2fd3577f7cc",
        "name": "Capteur d'ouverture - Portail",
        "server": "67f9f8146a54c570",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.xiaomi_aqara_doorwindow_sensor_portal_contact",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "15",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 200,
        "y": 1040,
        "wires": [
            [
                "2a59da1538979c06"
            ],
            []
        ]
    },
    {
        "id": "5094bada9b522fb4",
        "type": "comment",
        "z": "75e3af83e1a079d2",
        "g": "072fa2fd3577f7cc",
        "name": "Ouvert depuis 15 minutes",
        "info": "",
        "x": 210,
        "y": 1000,
        "wires": []
    },
    {
        "id": "2a59da1538979c06",
        "type": "api-call-service",
        "z": "75e3af83e1a079d2",
        "g": "072fa2fd3577f7cc",
        "name": "Notification groupée",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "all_hass_members",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t   \"title\":\"Portail 🚗\",\t   \"message\": \"🚪🚨🚨🚨 Le portail est ouvert depuis 15 minutes 🚨🚨🚨🚪\",\t   \"data\": {\t       \"channel\": \"Alert\",\t       \"importance\": \"high\",\t       \"ledColor\": \"#00ced1\"\t    }\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 740,
        "y": 1040,
        "wires": [
            []
        ]
    },
    {
        "id": "8afe1e54c7691bee",
        "type": "server-state-changed",
        "z": "75e3af83e1a079d2",
        "g": "9fcdce9a6ae5a6e3",
        "name": "Capteur d'ouverture - Porte de garage",
        "server": "67f9f8146a54c570",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.xiaomi_aqara_doorwindow_sensor_garage_contact",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "60",
        "forType": "num",
        "forUnits": "seconds",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 230,
        "y": 1240,
        "wires": [
            [
                "453f38d8301a4304"
            ],
            [
                "8870ac7f5a5f66b7"
            ]
        ]
    },
    {
        "id": "453f38d8301a4304",
        "type": "api-call-service",
        "z": "75e3af83e1a079d2",
        "g": "9fcdce9a6ae5a6e3",
        "name": "Notification groupée",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "all_hass_members",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t   \"title\":\"Garage 🚗\",\t   \"message\": \"La porte du garage est ouverte 🚪\",\t   \"data\": {\t       \"channel\": \"Alert\",\t       \"importance\": \"high\",\t       \"ledColor\": \"#00ced1\"\t    }\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 740,
        "y": 1180,
        "wires": [
            []
        ]
    },
    {
        "id": "26fd0c98112ef5d4",
        "type": "comment",
        "z": "75e3af83e1a079d2",
        "g": "9fcdce9a6ae5a6e3",
        "name": "Porte du garage ouverte",
        "info": "",
        "x": 970,
        "y": 1180,
        "wires": []
    },
    {
        "id": "8870ac7f5a5f66b7",
        "type": "api-call-service",
        "z": "75e3af83e1a079d2",
        "g": "9fcdce9a6ae5a6e3",
        "name": "Notification groupée",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "all_hass_members",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t   \"title\":\"Garage 🚗\",\t   \"message\": \"La porte du garage est fermée 🚪\",\t   \"data\": {\t       \"channel\": \"Alert\",\t       \"importance\": \"high\",\t       \"ledColor\": \"#00ced1\"\t    }\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 740,
        "y": 1300,
        "wires": [
            []
        ]
    },
    {
        "id": "a659802535ae657e",
        "type": "comment",
        "z": "75e3af83e1a079d2",
        "g": "9fcdce9a6ae5a6e3",
        "name": "Porte du garage fermée",
        "info": "",
        "x": 970,
        "y": 1300,
        "wires": []
    },
    {
        "id": "14b0ef41c95a19d9",
        "type": "server-state-changed",
        "z": "75e3af83e1a079d2",
        "g": "df7e9235e0741f5a",
        "name": "TEMPO - Heure Creuse",
        "server": "67f9f8146a54c570",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.rte_tempo_heures_creuses",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 180,
        "y": 1460,
        "wires": [
            [
                "4728e0ffe589df40"
            ],
            []
        ]
    },
    {
        "id": "4728e0ffe589df40",
        "type": "api-call-service",
        "z": "75e3af83e1a079d2",
        "g": "df7e9235e0741f5a",
        "name": "Notification groupée",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "all_hass_members",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t   \"title\":\"Mon Tempo⚡\",\t   \"message\": \"Passage en Heure Creuse\",\t   \"data\": {\t       \"channel\": \"Alert\",\t       \"importance\": \"high\",\t       \"ledColor\": \"#00ced1\"\t    }\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 720,
        "y": 1420,
        "wires": [
            []
        ]
    },
    {
        "id": "5ad473e24fa7b2dd",
        "type": "zigbee2mqtt-in",
        "z": "d38a632520fcc2d9",
        "g": "720379d6691a57cf",
        "name": "TRADFRI shortcut button",
        "server": "3d3aec077e3a2c6d",
        "friendly_name": "ikea_tradfri_shortcut_remote_control (E1812)",
        "device_id": "0x70ac08fffe729998",
        "state": "0",
        "outputAtStartup": true,
        "filterChanges": false,
        "enableMultiple": false,
        "x": 190,
        "y": 260,
        "wires": [
            [
                "42ff5423ed6c02d6"
            ]
        ]
    },
    {
        "id": "42ff5423ed6c02d6",
        "type": "switch",
        "z": "d38a632520fcc2d9",
        "g": "720379d6691a57cf",
        "name": "",
        "property": "payload.action",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "on",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "brightness_move_up",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "brightness_move_down",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "brightness_stop",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 4,
        "x": 490,
        "y": 260,
        "wires": [
            [
                "db060e5ad6e44edb",
                "98204f32600bf41d"
            ],
            [
                "5c9599f90c395d39"
            ],
            [
                "fe91180faccea2cb"
            ],
            [
                "76d587e261d8cf31"
            ]
        ]
    },
    {
        "id": "0b6484862ac193f6",
        "type": "api-call-service",
        "z": "d38a632520fcc2d9",
        "g": "720379d6691a57cf",
        "name": "Trâdfri LED Toogle",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "toggle",
        "areaId": [],
        "deviceId": [
            "b117756ad76326d2e87fc52cef49b228"
        ],
        "entityId": [],
        "data": "{\"brightness_pct\":50,\"color_temp\":454}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1370,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "5c9599f90c395d39",
        "type": "debug",
        "z": "d38a632520fcc2d9",
        "g": "720379d6691a57cf",
        "name": "brightness_move_up",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 820,
        "y": 400,
        "wires": []
    },
    {
        "id": "fe91180faccea2cb",
        "type": "debug",
        "z": "d38a632520fcc2d9",
        "g": "720379d6691a57cf",
        "name": "brightness_move_down",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 830,
        "y": 440,
        "wires": []
    },
    {
        "id": "76d587e261d8cf31",
        "type": "debug",
        "z": "d38a632520fcc2d9",
        "g": "720379d6691a57cf",
        "name": "brightness_stop",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 800,
        "y": 480,
        "wires": []
    },
    {
        "id": "db060e5ad6e44edb",
        "type": "debug",
        "z": "d38a632520fcc2d9",
        "d": true,
        "g": "720379d6691a57cf",
        "name": "on",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 770,
        "y": 360,
        "wires": []
    },
    {
        "id": "98204f32600bf41d",
        "type": "time-range-switch",
        "z": "d38a632520fcc2d9",
        "g": "720379d6691a57cf",
        "name": "",
        "lat": "45.509909",
        "lon": "4.898678",
        "startTime": "sunset",
        "endTime": "sunriseEnd",
        "startOffset": 0,
        "endOffset": 0,
        "x": 840,
        "y": 180,
        "wires": [
            [
                "a6ba4dc8e6bca23c"
            ],
            [
                "98bffa6e55b051dc"
            ]
        ]
    },
    {
        "id": "98bffa6e55b051dc",
        "type": "api-call-service",
        "z": "d38a632520fcc2d9",
        "g": "720379d6691a57cf",
        "name": "Trâdfri LED Toogle",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "toggle",
        "areaId": [],
        "deviceId": [
            "b117756ad76326d2e87fc52cef49b228"
        ],
        "entityId": [],
        "data": "{\"brightness_pct\":100,\"kelvin\":3500}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1110,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "785d1aca409d97ef",
        "type": "zigbee2mqtt-in",
        "z": "d38a632520fcc2d9",
        "g": "e3646ad3d7ab0bc7",
        "name": "TRADFRI Styrbar Remote",
        "server": "3d3aec077e3a2c6d",
        "friendly_name": "ikea_tradfri_styrbar_remote_control (E2001/E2002)",
        "device_id": "0xb43522fffe71ba30",
        "state": "0",
        "outputAtStartup": true,
        "filterChanges": false,
        "enableMultiple": false,
        "x": 190,
        "y": 780,
        "wires": [
            [
                "9779940fa16b0a23"
            ]
        ]
    },
    {
        "id": "9779940fa16b0a23",
        "type": "switch",
        "z": "d38a632520fcc2d9",
        "g": "e3646ad3d7ab0bc7",
        "name": "",
        "property": "payload.action",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "on",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "off",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "arrow_right_click",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "arrow_left_click",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 4,
        "x": 510,
        "y": 780,
        "wires": [
            [
                "2a58bc97635a36f7"
            ],
            [
                "e0dd3cab58381ace"
            ],
            [
                "61898786b76b5af6"
            ],
            [
                "d5ecd7e099f915d5"
            ]
        ]
    },
    {
        "id": "2a58bc97635a36f7",
        "type": "time-range-switch",
        "z": "d38a632520fcc2d9",
        "g": "e3646ad3d7ab0bc7",
        "name": "",
        "lat": "45.509909",
        "lon": "4.898678",
        "startTime": "sunset",
        "endTime": "sunriseEnd",
        "startOffset": 0,
        "endOffset": 0,
        "x": 780,
        "y": 680,
        "wires": [
            [
                "91365ffe8d085439"
            ],
            [
                "f5f78a8199f99c7c"
            ]
        ]
    },
    {
        "id": "91365ffe8d085439",
        "type": "api-call-service",
        "z": "d38a632520fcc2d9",
        "g": "e3646ad3d7ab0bc7",
        "name": "",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [
            "ea2ecfff1af538886479c62c8df69a0b",
            "3bba52ce4ee7ba52c59a3fb39b9507b2"
        ],
        "entityId": [],
        "data": "{\"brightness_pct\":95,\"kelvin\":3250}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1070,
        "y": 640,
        "wires": [
            []
        ]
    },
    {
        "id": "f5f78a8199f99c7c",
        "type": "api-call-service",
        "z": "d38a632520fcc2d9",
        "g": "e3646ad3d7ab0bc7",
        "name": "",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [
            "ea2ecfff1af538886479c62c8df69a0b",
            "3bba52ce4ee7ba52c59a3fb39b9507b2"
        ],
        "entityId": [],
        "data": "{\"brightness_pct\":100,\"kelvin\":3500}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1070,
        "y": 720,
        "wires": [
            []
        ]
    },
    {
        "id": "b6b89ca6766e58a7",
        "type": "api-call-service",
        "z": "d38a632520fcc2d9",
        "g": "e3646ad3d7ab0bc7",
        "name": "",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [
            "ea2ecfff1af538886479c62c8df69a0b",
            "3bba52ce4ee7ba52c59a3fb39b9507b2"
        ],
        "entityId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1390,
        "y": 820,
        "wires": [
            []
        ]
    },
    {
        "id": "a6ba4dc8e6bca23c",
        "type": "time-range-switch",
        "z": "d38a632520fcc2d9",
        "g": "720379d6691a57cf",
        "name": "",
        "lat": "45.509909",
        "lon": "4.898678",
        "startTime": "21:00",
        "endTime": "7:30",
        "startOffset": 0,
        "endOffset": 0,
        "x": 1070,
        "y": 120,
        "wires": [
            [
                "0b6484862ac193f6"
            ],
            [
                "28189ba1bd1714b2"
            ]
        ]
    },
    {
        "id": "28189ba1bd1714b2",
        "type": "api-call-service",
        "z": "d38a632520fcc2d9",
        "g": "720379d6691a57cf",
        "name": "Trâdfri LED Toogle",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "toggle",
        "areaId": [],
        "deviceId": [
            "b117756ad76326d2e87fc52cef49b228"
        ],
        "entityId": [],
        "data": "{\"brightness_pct\":85,\"kelvin\":2750}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1370,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "e0dd3cab58381ace",
        "type": "time-range-switch",
        "z": "d38a632520fcc2d9",
        "g": "e3646ad3d7ab0bc7",
        "name": "",
        "lat": "45.509909",
        "lon": "4.898678",
        "startTime": "22:30",
        "endTime": "06:00",
        "startOffset": 0,
        "endOffset": 0,
        "x": 750,
        "y": 840,
        "wires": [
            [
                "82ca5df479c97c2c"
            ],
            [
                "539b28f6c883e258"
            ]
        ]
    },
    {
        "id": "82ca5df479c97c2c",
        "type": "api-call-service",
        "z": "d38a632520fcc2d9",
        "g": "e3646ad3d7ab0bc7",
        "name": "",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [
            "da56d3ec6709b316679b0a7d8257a78e"
        ],
        "entityId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1060,
        "y": 820,
        "wires": [
            [
                "b6b89ca6766e58a7"
            ]
        ]
    },
    {
        "id": "539b28f6c883e258",
        "type": "api-call-service",
        "z": "d38a632520fcc2d9",
        "g": "e3646ad3d7ab0bc7",
        "name": "",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [
            "ea2ecfff1af538886479c62c8df69a0b",
            "3bba52ce4ee7ba52c59a3fb39b9507b2"
        ],
        "entityId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1050,
        "y": 900,
        "wires": [
            []
        ]
    },
    {
        "id": "72e02e4c40f4d01e",
        "type": "function",
        "z": "d38a632520fcc2d9",
        "g": "e3646ad3d7ab0bc7",
        "name": "Simulated Brightness Up",
        "func": "var brightness = msg.data.attributes.brightness;\nbrightness = parseInt(brightness);\n\nif (brightness < 245) {\n    brightness = brightness + 10;\n} else {\n    brightness = 255;\n}\n\nmsg.payload = brightness;\nnode.status({ fill: \"green\", shape: \"ring\", text: msg.payload });\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1010,
        "y": 1000,
        "wires": [
            [
                "cbe8daaf954c90bc"
            ]
        ]
    },
    {
        "id": "61898786b76b5af6",
        "type": "api-current-state",
        "z": "d38a632520fcc2d9",
        "g": "e3646ad3d7ab0bc7",
        "name": "Current Brightness",
        "server": "67f9f8146a54c570",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "light.ikea_tradfri_bulb_library_window",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 770,
        "y": 1000,
        "wires": [
            [
                "72e02e4c40f4d01e"
            ]
        ]
    },
    {
        "id": "cbe8daaf954c90bc",
        "type": "api-call-service",
        "z": "d38a632520fcc2d9",
        "g": "e3646ad3d7ab0bc7",
        "name": "",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [
            "ea2ecfff1af538886479c62c8df69a0b",
            "3bba52ce4ee7ba52c59a3fb39b9507b2"
        ],
        "entityId": [],
        "data": "{\"brightness\": msg.payload, \"kelvin\":3500}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1270,
        "y": 1000,
        "wires": [
            []
        ]
    },
    {
        "id": "94ad592446115235",
        "type": "function",
        "z": "d38a632520fcc2d9",
        "g": "e3646ad3d7ab0bc7",
        "name": "Simulated Brightness Down",
        "func": "var brightness = msg.data.attributes.brightness;\nbrightness = parseInt(brightness);\n\nif (brightness >= 10) {\n    brightness = brightness - 10;\n} else {\n    brightness = 0;\n}\n\nmsg.payload = brightness;\nnode.status({ fill: \"green\", shape: \"ring\", text: msg.payload });\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1020,
        "y": 1100,
        "wires": [
            [
                "c86b0152b1535977"
            ]
        ]
    },
    {
        "id": "d5ecd7e099f915d5",
        "type": "api-current-state",
        "z": "d38a632520fcc2d9",
        "g": "e3646ad3d7ab0bc7",
        "name": "Current Brightness",
        "server": "67f9f8146a54c570",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "light.ikea_tradfri_bulb_library_window",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 770,
        "y": 1100,
        "wires": [
            [
                "94ad592446115235"
            ]
        ]
    },
    {
        "id": "c86b0152b1535977",
        "type": "api-call-service",
        "z": "d38a632520fcc2d9",
        "g": "e3646ad3d7ab0bc7",
        "name": "",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [
            "ea2ecfff1af538886479c62c8df69a0b",
            "3bba52ce4ee7ba52c59a3fb39b9507b2"
        ],
        "entityId": [],
        "data": "{\"brightness\": msg.payload, \"kelvin\":3500}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1270,
        "y": 1100,
        "wires": [
            []
        ]
    },
    {
        "id": "cc1f27809a63a33a",
        "type": "eztimer",
        "z": "ef4177dc60cc0aa0",
        "g": "0a410973091ca16a",
        "name": "EZTimer Programmatic Control",
        "debug": false,
        "autoname": "07:05:00 - 07:25:00",
        "tag": "eztimer",
        "topic": "",
        "suspended": false,
        "sendEventsOnSuspend": false,
        "latLongSource": "haZone",
        "latLongHaZone": "zone.home",
        "lat": "45.509909",
        "lon": "4.898678",
        "timerType": "1",
        "startupMessage": true,
        "ontype": "2",
        "ontimesun": "dawn",
        "ontimetod": "07:05:00",
        "onpropertytype": "msg",
        "onproperty": "payload",
        "onvaluetype": "str",
        "onvalue": "on",
        "onoffset": 0,
        "onrandomoffset": 0,
        "onsuppressrepeats": true,
        "offtype": "2",
        "offtimesun": "dusk",
        "offtimetod": "07:25:00",
        "offduration": "00:01:00",
        "offpropertytype": "msg",
        "offproperty": "payload",
        "offvaluetype": "str",
        "offvalue": "off",
        "offoffset": 0,
        "offrandomoffset": 0,
        "offsuppressrepeats": false,
        "resend": false,
        "resendInterval": "0s",
        "mon": true,
        "tue": true,
        "wed": false,
        "thu": true,
        "fri": true,
        "sat": false,
        "sun": false,
        "x": 650,
        "y": 120,
        "wires": [
            [
                "ac459b9b77ece7e6"
            ]
        ]
    },
    {
        "id": "ebb53a51ab5ccf11",
        "type": "api-call-service",
        "z": "ef4177dc60cc0aa0",
        "g": "0a410973091ca16a",
        "name": "Lampe de chevet droite - ON",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [
            "222971c2d8f74481efc113de6863137e"
        ],
        "entityId": [],
        "data": "{\"brightness_pct\":30,\"kelvin\":2500,\"transition\":300}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1760,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "fbda5a46dfbf9398",
        "type": "switch",
        "z": "ef4177dc60cc0aa0",
        "g": "0a410973091ca16a",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "on",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "off",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1530,
        "y": 160,
        "wires": [
            [
                "ebb53a51ab5ccf11"
            ],
            [
                "a81733330fc2bf22"
            ]
        ]
    },
    {
        "id": "a81733330fc2bf22",
        "type": "api-call-service",
        "z": "ef4177dc60cc0aa0",
        "g": "0a410973091ca16a",
        "name": "Lampe de chevet droite - OFF",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [
            "222971c2d8f74481efc113de6863137e"
        ],
        "entityId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1770,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "69c4b32dc0cafed9",
        "type": "comment",
        "z": "ef4177dc60cc0aa0",
        "g": "0a410973091ca16a",
        "name": "Ultra chaud + Dimmer de 5 mins",
        "info": "",
        "x": 1770,
        "y": 60,
        "wires": []
    },
    {
        "id": "6dca6d82eb07e59e",
        "type": "comment",
        "z": "ef4177dc60cc0aa0",
        "g": "0a410973091ca16a",
        "name": "Jours de la semaine",
        "info": "",
        "x": 650,
        "y": 80,
        "wires": []
    },
    {
        "id": "de0a9319514f8be4",
        "type": "BooleanLogic",
        "z": "ef4177dc60cc0aa0",
        "g": "0a410973091ca16a",
        "name": "",
        "operation": "AND",
        "inputCount": 2,
        "topic": "result",
        "x": 1140,
        "y": 160,
        "wires": [
            [
                "468a62b856421418"
            ]
        ]
    },
    {
        "id": "b247e2d08a620c96",
        "type": "change",
        "z": "ef4177dc60cc0aa0",
        "g": "0a410973091ca16a",
        "name": "",
        "rules": [
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "on",
                "fromt": "str",
                "to": "true",
                "tot": "bool"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "off",
                "fromt": "str",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 440,
        "y": 280,
        "wires": [
            [
                "d290ad3769611a62"
            ]
        ]
    },
    {
        "id": "468a62b856421418",
        "type": "change",
        "z": "ef4177dc60cc0aa0",
        "g": "0a410973091ca16a",
        "name": "",
        "rules": [
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "true",
                "fromt": "bool",
                "to": "on",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "false",
                "fromt": "bool",
                "to": "off",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1340,
        "y": 160,
        "wires": [
            [
                "fbda5a46dfbf9398"
            ]
        ]
    },
    {
        "id": "4b21984e481a7b0a",
        "type": "comment",
        "z": "ef4177dc60cc0aa0",
        "g": "0a410973091ca16a",
        "name": "HA Bouton Scene",
        "info": "",
        "x": 190,
        "y": 240,
        "wires": []
    },
    {
        "id": "23156388e1dd954d",
        "type": "comment",
        "z": "ef4177dc60cc0aa0",
        "g": "0a410973091ca16a",
        "name": "On = True || Off = False",
        "info": "",
        "x": 440,
        "y": 240,
        "wires": []
    },
    {
        "id": "215fdf80459d2559",
        "type": "comment",
        "z": "ef4177dc60cc0aa0",
        "g": "0a410973091ca16a",
        "name": "Logic AND Test",
        "info": "",
        "x": 1140,
        "y": 120,
        "wires": []
    },
    {
        "id": "228c02c3187f2526",
        "type": "comment",
        "z": "ef4177dc60cc0aa0",
        "g": "0a410973091ca16a",
        "name": "True = On || False= Off",
        "info": "",
        "x": 1340,
        "y": 120,
        "wires": []
    },
    {
        "id": "ac459b9b77ece7e6",
        "type": "change",
        "z": "ef4177dc60cc0aa0",
        "g": "0a410973091ca16a",
        "name": "",
        "rules": [
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "on",
                "fromt": "str",
                "to": "true",
                "tot": "bool"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "off",
                "fromt": "str",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 920,
        "y": 120,
        "wires": [
            [
                "de0a9319514f8be4"
            ]
        ]
    },
    {
        "id": "d290ad3769611a62",
        "type": "link out",
        "z": "ef4177dc60cc0aa0",
        "g": "0a410973091ca16a",
        "name": "LNK Scene FadeIn Bedroom OUT",
        "mode": "link",
        "links": [
            "507f585214724c32",
            "9087453ab661c6aa",
            "efa6d1e4ffc46ae7",
            "aea8a816d6a4e80a"
        ],
        "x": 605,
        "y": 280,
        "wires": []
    },
    {
        "id": "9087453ab661c6aa",
        "type": "link in",
        "z": "ef4177dc60cc0aa0",
        "g": "0a410973091ca16a",
        "name": "LNK Scene FadeIn Bedroom IN",
        "links": [
            "d290ad3769611a62"
        ],
        "x": 975,
        "y": 280,
        "wires": [
            [
                "de0a9319514f8be4"
            ]
        ]
    },
    {
        "id": "659b074d13bc4a48",
        "type": "server-state-changed",
        "z": "ef4177dc60cc0aa0",
        "g": "0a410973091ca16a",
        "name": "Scene FadeIn Bedroom",
        "server": "67f9f8146a54c570",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "input_boolean.bedroom_awakening_lights_weekdays_scene",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 180,
        "y": 280,
        "wires": [
            [
                "b247e2d08a620c96"
            ],
            []
        ]
    },
    {
        "id": "0a5dbec93fe12596",
        "type": "ha-time",
        "z": "ef4177dc60cc0aa0",
        "g": "0a410973091ca16a",
        "name": "Heure du réveil",
        "server": "67f9f8146a54c570",
        "version": 3,
        "exposeAsEntityConfig": "",
        "entityId": "input_datetime.bedroom_awake_sunrise_simulation_starttime",
        "property": "",
        "offset": "0",
        "offsetType": "num",
        "offsetUnits": "minutes",
        "randomOffset": false,
        "repeatDaily": false,
        "outputProperties": [
            {
                "property": "awake_starttime",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            }
        ],
        "sunday": true,
        "monday": true,
        "tuesday": true,
        "wednesday": true,
        "thursday": true,
        "friday": true,
        "saturday": true,
        "x": 160,
        "y": 80,
        "wires": [
            [
                "f04d2855a0cf9d58"
            ]
        ]
    },
    {
        "id": "a6c13a984da3bcb9",
        "type": "function",
        "z": "ef4177dc60cc0aa0",
        "g": "0a410973091ca16a",
        "name": "EZTimer Programmatic Control",
        "func": "function addMinutes(numOfMinutes, date = new Date()) {\n  date.setMinutes(date.getMinutes() + numOfMinutes);\n\n  return date.toLocaleTimeString(\"fr-FR\");\n}\n// 👇️ Add 10 minutes to current Date\n//const time_end = addMinutes(10);\n\nlet eztimer = {};\neztimer = {payload: {\n        ontype: 2,\n        ontime: msg.awake_starttime,\n        onvalue: 'on',\n        offtype: 2,\n        offtime: msg.awake_endtime,\n        offoffset: 0,\n        offvalue: 'off',\n        suspended: false,\n        mon: true,\n        tue: true,\n        wed: false,\n        thu: true,\n        fri: true,\n        sat: false,\n        sun: false,\n    }\n};\n\nmsg = eztimer;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 290,
        "y": 160,
        "wires": [
            [
                "cc1f27809a63a33a"
            ]
        ]
    },
    {
        "id": "3e55f6127904f54f",
        "type": "api-call-service",
        "z": "ef4177dc60cc0aa0",
        "g": "8d0ec531b4a00dcf",
        "name": "Bonjour !",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "tts",
        "service": "google_say",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.lenovo_smart_clock_bedroom"
        ],
        "data": "{\"message\": msg.payload,\"language\":\"fr\"}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 2360,
        "y": 620,
        "wires": [
            []
        ]
    },
    {
        "id": "9f16946423f3476e",
        "type": "eztimer",
        "z": "ef4177dc60cc0aa0",
        "d": true,
        "g": "8d0ec531b4a00dcf",
        "name": "EZTimer Prog. Ctrl Weather",
        "debug": false,
        "autoname": " - 07:17:30",
        "tag": "eztimer",
        "topic": "",
        "suspended": false,
        "sendEventsOnSuspend": false,
        "latLongSource": "haZone",
        "latLongHaZone": "zone.home",
        "lat": "45.509909",
        "lon": "4.898678",
        "timerType": "1",
        "startupMessage": true,
        "ontype": "9",
        "ontimesun": "dawn",
        "ontimetod": "{{msg.weather_announcement_time}}",
        "onpropertytype": "msg",
        "onproperty": "weather_announcement_time",
        "onvaluetype": "bool",
        "onvalue": "true",
        "onoffset": 0,
        "onrandomoffset": 0,
        "onsuppressrepeats": false,
        "offtype": "2",
        "offtimesun": "dusk",
        "offtimetod": "07:17:30",
        "offduration": "00:01:00",
        "offpropertytype": "msg",
        "offproperty": "payload",
        "offvaluetype": "bool",
        "offvalue": "false",
        "offoffset": 0,
        "offrandomoffset": 0,
        "offsuppressrepeats": false,
        "resend": false,
        "resendInterval": "0s",
        "mon": true,
        "tue": true,
        "wed": false,
        "thu": true,
        "fri": true,
        "sat": false,
        "sun": false,
        "x": 820,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "d370cd813312ba19",
        "type": "comment",
        "z": "ef4177dc60cc0aa0",
        "g": "8d0ec531b4a00dcf",
        "name": "Message de réveil",
        "info": "",
        "x": 430,
        "y": 500,
        "wires": []
    },
    {
        "id": "4de035aced916c17",
        "type": "api-call-service",
        "z": "ef4177dc60cc0aa0",
        "g": "8d0ec531b4a00dcf",
        "name": "Sound level",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "media_player",
        "service": "volume_set",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.lenovo_smart_clock_bedroom"
        ],
        "data": "{\"volume_level\":0.25}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 2230,
        "y": 520,
        "wires": [
            [
                "3e55f6127904f54f"
            ]
        ]
    },
    {
        "id": "5f9d69fb36f3dd48",
        "type": "BooleanLogic",
        "z": "ef4177dc60cc0aa0",
        "g": "8d0ec531b4a00dcf",
        "name": "",
        "operation": "AND",
        "inputCount": "2",
        "topic": "result",
        "x": 700,
        "y": 620,
        "wires": [
            [
                "0999f33e79a3fad8"
            ]
        ]
    },
    {
        "id": "d618b5c72cb48b31",
        "type": "comment",
        "z": "ef4177dc60cc0aa0",
        "g": "8d0ec531b4a00dcf",
        "name": "Logic AND Test",
        "info": "",
        "x": 700,
        "y": 580,
        "wires": []
    },
    {
        "id": "11e198fbd1d50498",
        "type": "switch",
        "z": "ef4177dc60cc0aa0",
        "g": "8d0ec531b4a00dcf",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "on",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "off",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 970,
        "y": 640,
        "wires": [
            [
                "0b891e9f8170d9ad"
            ],
            [
                "9ca33f25efebf4f6"
            ]
        ]
    },
    {
        "id": "0999f33e79a3fad8",
        "type": "change",
        "z": "ef4177dc60cc0aa0",
        "g": "8d0ec531b4a00dcf",
        "name": "",
        "rules": [
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "true",
                "fromt": "bool",
                "to": "on",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "false",
                "fromt": "bool",
                "to": "off",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 900,
        "y": 520,
        "wires": [
            [
                "11e198fbd1d50498"
            ]
        ]
    },
    {
        "id": "09c6ccd86e5a4981",
        "type": "comment",
        "z": "ef4177dc60cc0aa0",
        "g": "8d0ec531b4a00dcf",
        "name": "True = On || False= Off",
        "info": "",
        "x": 920,
        "y": 480,
        "wires": []
    },
    {
        "id": "9ca33f25efebf4f6",
        "type": "debug",
        "z": "ef4177dc60cc0aa0",
        "d": true,
        "g": "8d0ec531b4a00dcf",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1190,
        "y": 780,
        "wires": []
    },
    {
        "id": "be604070ad6dda3a",
        "type": "change",
        "z": "ef4177dc60cc0aa0",
        "g": "8d0ec531b4a00dcf",
        "name": "",
        "rules": [
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "on",
                "fromt": "str",
                "to": "true",
                "tot": "bool"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "off",
                "fromt": "str",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 440,
        "y": 680,
        "wires": [
            [
                "5f9d69fb36f3dd48"
            ]
        ]
    },
    {
        "id": "b1596809852e2dc0",
        "type": "comment",
        "z": "ef4177dc60cc0aa0",
        "g": "8d0ec531b4a00dcf",
        "name": "True = On || False= Off",
        "info": "",
        "x": 440,
        "y": 640,
        "wires": []
    },
    {
        "id": "1beff511a4d8eb44",
        "type": "server-state-changed",
        "z": "ef4177dc60cc0aa0",
        "g": "8d0ec531b4a00dcf",
        "name": "Switch Annonce Réveil-matin",
        "server": "67f9f8146a54c570",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "input_boolean.bedroom_awakening_tts_weekdays_scene",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 200,
        "y": 680,
        "wires": [
            [
                "be604070ad6dda3a"
            ],
            []
        ]
    },
    {
        "id": "3ce0719cf7669298",
        "type": "ha-time",
        "z": "ef4177dc60cc0aa0",
        "g": "8d0ec531b4a00dcf",
        "name": "Heure de l'annonce",
        "server": "67f9f8146a54c570",
        "version": 3,
        "exposeAsEntityConfig": "",
        "entityId": "input_datetime.bedroom_awake_tts_morning_meteo",
        "property": "",
        "offset": "0",
        "offsetType": "num",
        "offsetUnits": "minutes",
        "randomOffset": false,
        "repeatDaily": false,
        "outputProperties": [
            {
                "property": "weather_announcement_time",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "bedroom_awake_tts_morning_meteo",
                "valueType": "str"
            },
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "true",
                "valueType": "bool"
            }
        ],
        "sunday": true,
        "monday": true,
        "tuesday": true,
        "wednesday": true,
        "thursday": true,
        "friday": true,
        "saturday": true,
        "x": 430,
        "y": 540,
        "wires": [
            [
                "5f9d69fb36f3dd48"
            ]
        ]
    },
    {
        "id": "dc4a90601c3f38c1",
        "type": "api-current-state",
        "z": "ef4177dc60cc0aa0",
        "g": "8d0ec531b4a00dcf",
        "name": "Météo",
        "server": "67f9f8146a54c570",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "weather.maison",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 1470,
        "y": 520,
        "wires": [
            [
                "9774f85208f802ed",
                "bf9609e444a455af"
            ]
        ]
    },
    {
        "id": "9774f85208f802ed",
        "type": "debug",
        "z": "ef4177dc60cc0aa0",
        "d": true,
        "g": "8d0ec531b4a00dcf",
        "name": "Météo",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "data",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1470,
        "y": 780,
        "wires": []
    },
    {
        "id": "a1d01c60a79665a9",
        "type": "function",
        "z": "ef4177dc60cc0aa0",
        "g": "8d0ec531b4a00dcf",
        "name": "Météo",
        "func": "var fetedujour = msg.fetedujour;\nvar weather = msg.data.attributes; \nvar weather_state = '';\nvar temperature = weather.temperature;\nvar temperature_ext = Math.round(msg.temperature_ext);\nvar humidity = weather.humidity;\nvar humidity_ext = Math.round(msg.humidity_ext);\nvar windspeed = Math.round(weather.wind_speed);\nvar windbearing = weather.wind_bearing;\nvar wind_direction_list = [\n  'Nord',\n  'Nord - Nord-Est',\n  'Nord-Est',\n  'Est - Nord-Est',\n  'Est',\n  'Est - Sud-Est',\n  'Sud-Est',\n  'Sud - Sud-Est',\n  'Sud',\n  'Sud - Sud-Ouest',\n  'Sud-Ouest',\n  'Ouest - Sud-Ouest',\n  'Ouest',\n  'Ouest - NOrd-Ouest',\n  'Nord-Ouest',\n  'Nord - Nord-Ouest',\n  'Nord',\n];\nvar index = Math.round((windbearing + 11.25) / 22.5);\nvar wind_direction = wind_direction_list[index];\nvar rain = weather.forecast[0]['precipitation'];\n\nswitch (msg.data.state) {\n  case 'clear-night':\n    weather_state = 'nuit claire';\n    break;\n  case 'cloudy':\n    weather_state = 'nuageux';\n    break;\n  case 'exceptional':\n    weather_state = 'exceptionnel';\n    break;\n  case 'fog':\n    weather_state = 'brumeux';\n    break;\n  case 'hail':\n    weather_state = 'grêleux';\n    break;\n  case 'lightning':\n    weather_state = 'orageux';\n    break;\n  case 'lightning-rainy':\n    weather_state = 'orageux et pluvieux';\n    break;\n  case 'partlycloudy':\n    weather_state = 'partiellement nuageux';\n    break;\n  case 'pouring':\n    weather_state = 'humide';\n    break;\n  case 'rainy':\n    weather_state = 'pluvieux';\n    break;\n  case 'snowy':\n    weather_state = 'neigeux';\n    break;\n  case 'snowy-rainy':\n    weather_state = 'neigeux et pluvieux';\n    break;\n  case 'sunny':\n    weather_state = 'ensoleillé';\n    break;\n  case 'windy':\n    weather_state = 'venteux';\n    break;\n  default:\n    weather_state = 'inconnu';\n}\n\nmsg.payload = \"Bonjour ! \" + fetedujour + \"Il semble qu'aujourd'hui le temps sera \" + weather_state + \". Il fait actuellement \" + temperature_ext + \" degrés sur la terasse avec un taux d'humidité de \" + humidity_ext + \"%, un vent de \" + wind_direction + \" à une vitesse de \" + windspeed + \" mètres par seconde et un risque de précipitation de \" + rain + \" millimètres de pluie. Profitez-bien de votre journée ! Bisous bisous !\";\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2070,
        "y": 520,
        "wires": [
            [
                "4de035aced916c17"
            ]
        ]
    },
    {
        "id": "0b891e9f8170d9ad",
        "type": "api-current-state",
        "z": "ef4177dc60cc0aa0",
        "g": "8d0ec531b4a00dcf",
        "name": "Temp. Ext.",
        "server": "67f9f8146a54c570",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "sensor.xiaomi_aqara_tph_sensor_terrasse_temperature",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "temperature_ext",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 1130,
        "y": 520,
        "wires": [
            [
                "3204712dc4e2bdb7"
            ]
        ]
    },
    {
        "id": "3204712dc4e2bdb7",
        "type": "api-current-state",
        "z": "ef4177dc60cc0aa0",
        "g": "8d0ec531b4a00dcf",
        "name": "Humidité Ext.",
        "server": "67f9f8146a54c570",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "sensor.xiaomi_aqara_tph_sensor_terrasse_humidity",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "humidity_ext",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 1310,
        "y": 520,
        "wires": [
            [
                "dc4a90601c3f38c1"
            ]
        ]
    },
    {
        "id": "a3de5728a9370859",
        "type": "function",
        "z": "ef4177dc60cc0aa0",
        "d": true,
        "g": "8d0ec531b4a00dcf",
        "name": "EZTimer Programmatic Control",
        "func": "let eztimer = {};\neztimer = {payload: {\n        ontype: 2,\n        ontime: msg.weather_announcement_time,\n        onvalue: true,\n        offtype: 2,\n        offtime: msg.weather_announcement_time,\n        offoffset: 1,\n        offvalue: false,\n        suspended: false,\n        mon: true,\n        tue: true,\n        wed: false,\n        thu: true,\n        fri: true,\n        sat: true,\n        sun: false,\n    }\n};\n\nmsg = eztimer;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 530,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "6401f6e477ccbf54",
        "type": "comment",
        "z": "ef4177dc60cc0aa0",
        "g": "c8157906275edb13",
        "name": "Jours de la semaine",
        "info": "",
        "x": 990,
        "y": 1000,
        "wires": []
    },
    {
        "id": "c4204f8f6dbe542a",
        "type": "comment",
        "z": "ef4177dc60cc0aa0",
        "g": "c8157906275edb13",
        "name": "On = True || Off = False",
        "info": "",
        "x": 1000,
        "y": 1140,
        "wires": []
    },
    {
        "id": "4333aa870790a3f5",
        "type": "comment",
        "z": "ef4177dc60cc0aa0",
        "g": "c8157906275edb13",
        "name": "HA Bouton Scene",
        "info": "",
        "x": 730,
        "y": 1140,
        "wires": []
    },
    {
        "id": "4f9cc7553bbf3230",
        "type": "BooleanLogic",
        "z": "ef4177dc60cc0aa0",
        "g": "c8157906275edb13",
        "name": "",
        "operation": "AND",
        "inputCount": "2",
        "topic": "result",
        "x": 1220,
        "y": 1060,
        "wires": [
            [
                "b831e5a06ca31a02"
            ]
        ]
    },
    {
        "id": "b4f74a851b7336ca",
        "type": "comment",
        "z": "ef4177dc60cc0aa0",
        "g": "c8157906275edb13",
        "name": "Logic AND Test",
        "info": "",
        "x": 1220,
        "y": 1020,
        "wires": []
    },
    {
        "id": "ecc063e246abcccf",
        "type": "change",
        "z": "ef4177dc60cc0aa0",
        "g": "c8157906275edb13",
        "name": "",
        "rules": [
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "on",
                "fromt": "str",
                "to": "true",
                "tot": "bool"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "off",
                "fromt": "str",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1000,
        "y": 1180,
        "wires": [
            [
                "4f9cc7553bbf3230"
            ]
        ]
    },
    {
        "id": "6fdf7127eece1c55",
        "type": "api-call-service",
        "z": "ef4177dc60cc0aa0",
        "g": "c8157906275edb13",
        "name": "Lampe Krosby - Hall - ON",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [
            "52a1ac0d58cb321bd0643f6b5ba14b5f"
        ],
        "entityId": [],
        "data": "{\"brightness_pct\":75,\"kelvin\":3500,\"transition\":300}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1830,
        "y": 1000,
        "wires": [
            []
        ]
    },
    {
        "id": "bd1195423559a8fb",
        "type": "comment",
        "z": "ef4177dc60cc0aa0",
        "g": "c8157906275edb13",
        "name": "True = On || False= Off",
        "info": "",
        "x": 1420,
        "y": 1020,
        "wires": []
    },
    {
        "id": "b831e5a06ca31a02",
        "type": "change",
        "z": "ef4177dc60cc0aa0",
        "g": "c8157906275edb13",
        "name": "",
        "rules": [
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "true",
                "fromt": "bool",
                "to": "on",
                "tot": "str"
            },
            {
                "t": "change",
                "p": "payload",
                "pt": "msg",
                "from": "false",
                "fromt": "bool",
                "to": "off",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1420,
        "y": 1060,
        "wires": [
            [
                "64754e63faacd2f0"
            ]
        ]
    },
    {
        "id": "64754e63faacd2f0",
        "type": "switch",
        "z": "ef4177dc60cc0aa0",
        "g": "c8157906275edb13",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "on",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "off",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1610,
        "y": 1060,
        "wires": [
            [
                "6fdf7127eece1c55"
            ],
            [
                "0ebdf36ad1d1fda2"
            ]
        ]
    },
    {
        "id": "9824f605cb283d08",
        "type": "comment",
        "z": "ef4177dc60cc0aa0",
        "g": "c8157906275edb13",
        "name": "Neutre + Dimmer de 5 mins",
        "info": "",
        "x": 1840,
        "y": 960,
        "wires": []
    },
    {
        "id": "0ebdf36ad1d1fda2",
        "type": "api-call-service",
        "z": "ef4177dc60cc0aa0",
        "g": "c8157906275edb13",
        "name": "Lampe Krosby - Hall - OFF",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [
            "52a1ac0d58cb321bd0643f6b5ba14b5f"
        ],
        "entityId": [],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1840,
        "y": 1120,
        "wires": [
            []
        ]
    },
    {
        "id": "c9916fc266863c83",
        "type": "server-state-changed",
        "z": "ef4177dc60cc0aa0",
        "g": "c8157906275edb13",
        "name": "Scene FadeIn Hallway",
        "server": "67f9f8146a54c570",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "input_boolean.hallway_awakening_lights_weekdays_scene",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 740,
        "y": 1180,
        "wires": [
            [
                "ecc063e246abcccf"
            ],
            []
        ]
    },
    {
        "id": "573e974d78873055",
        "type": "ha-time",
        "z": "ef4177dc60cc0aa0",
        "g": "c8157906275edb13",
        "name": "Heure de début",
        "server": "67f9f8146a54c570",
        "version": 3,
        "exposeAsEntityConfig": "",
        "entityId": "input_datetime.hallway_awake_sunrise_simulation_starttime",
        "property": "",
        "offset": "0",
        "offsetType": "num",
        "offsetUnits": "minutes",
        "randomOffset": false,
        "repeatDaily": false,
        "outputProperties": [
            {
                "property": "hallway_awake_starttime",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "hallway_awake_starttime",
                "valueType": "str"
            }
        ],
        "sunday": true,
        "monday": true,
        "tuesday": true,
        "wednesday": true,
        "thursday": true,
        "friday": true,
        "saturday": true,
        "x": 160,
        "y": 1040,
        "wires": [
            [
                "ea30bc34a1bce9d1"
            ]
        ]
    },
    {
        "id": "ea30bc34a1bce9d1",
        "type": "api-current-state",
        "z": "ef4177dc60cc0aa0",
        "g": "c8157906275edb13",
        "name": "Heure de fin",
        "server": "67f9f8146a54c570",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_datetime.hallway_awake_sunrise_simulation_endtime",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "hallway_awake_endtime",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "hallway_awake_endtime",
                "valueType": "str"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 390,
        "y": 1040,
        "wires": [
            [
                "0a192d332821f6d7"
            ]
        ]
    },
    {
        "id": "0a192d332821f6d7",
        "type": "function",
        "z": "ef4177dc60cc0aa0",
        "g": "c8157906275edb13",
        "name": "EZTimer Programmatic Control",
        "func": "let eztimer = {};\neztimer = {payload: {\n        ontype: 2,\n        ontime: msg.hallway_awake_starttime,\n        onvalue: true,\n        offtype: 2,\n        offtime: msg.hallway_awake_endtime,\n        offoffset: 0,\n        offvalue: false,\n        suspended: false,\n        mon: true,\n        tue: true,\n        wed: false,\n        thu: true,\n        fri: true,\n        sat: false,\n        sun: false,\n    }\n};\n\nmsg = eztimer;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 670,
        "y": 1040,
        "wires": [
            [
                "7142c7a8cc28a951"
            ]
        ]
    },
    {
        "id": "7142c7a8cc28a951",
        "type": "eztimer",
        "z": "ef4177dc60cc0aa0",
        "g": "c8157906275edb13",
        "name": "EZTimer Prog. Ctrl Hallway Light",
        "debug": false,
        "autoname": "07:17:00 - 07:17:30",
        "tag": "eztimer",
        "topic": "",
        "suspended": false,
        "sendEventsOnSuspend": false,
        "latLongSource": "haZone",
        "latLongHaZone": "zone.home",
        "lat": "45.509909",
        "lon": "4.898678",
        "timerType": "1",
        "startupMessage": true,
        "ontype": "2",
        "ontimesun": "dawn",
        "ontimetod": "07:17:00",
        "onpropertytype": "msg",
        "onproperty": "payload",
        "onvaluetype": "bool",
        "onvalue": "true",
        "onoffset": 0,
        "onrandomoffset": 0,
        "onsuppressrepeats": false,
        "offtype": "2",
        "offtimesun": "dusk",
        "offtimetod": "07:17:30",
        "offduration": "00:01:00",
        "offpropertytype": "msg",
        "offproperty": "payload",
        "offvaluetype": "bool",
        "offvalue": "false",
        "offoffset": 0,
        "offrandomoffset": 0,
        "offsuppressrepeats": false,
        "resend": false,
        "resendInterval": "0s",
        "mon": true,
        "tue": true,
        "wed": false,
        "thu": true,
        "fri": true,
        "sat": false,
        "sun": false,
        "x": 990,
        "y": 1040,
        "wires": [
            [
                "4f9cc7553bbf3230"
            ]
        ]
    },
    {
        "id": "bf9609e444a455af",
        "type": "http request",
        "z": "ef4177dc60cc0aa0",
        "g": "8d0ec531b4a00dcf",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "https://fetedujour.fr/api/v2/CX2bGZVil6yV9SN4/text-normal",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 1690,
        "y": 520,
        "wires": [
            [
                "ad7251d7cec3dd01"
            ]
        ]
    },
    {
        "id": "d1c6b22692c55cd6",
        "type": "debug",
        "z": "ef4177dc60cc0aa0",
        "d": true,
        "g": "8d0ec531b4a00dcf",
        "name": "https://fetedujour.fr/api/#apiKey",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1890,
        "y": 760,
        "wires": []
    },
    {
        "id": "ad7251d7cec3dd01",
        "type": "function",
        "z": "ef4177dc60cc0aa0",
        "g": "8d0ec531b4a00dcf",
        "name": "Message",
        "func": "msg.fetedujour = 'Nous sommes le ' + msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1880,
        "y": 520,
        "wires": [
            [
                "d1c6b22692c55cd6",
                "a1d01c60a79665a9"
            ]
        ]
    },
    {
        "id": "f04d2855a0cf9d58",
        "type": "api-current-state",
        "z": "ef4177dc60cc0aa0",
        "g": "0a410973091ca16a",
        "name": "Heure de fin",
        "server": "67f9f8146a54c570",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_datetime.bedroom_awake_sunrise_simulation_endtime",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "awake_endtime",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 350,
        "y": 80,
        "wires": [
            [
                "a6c13a984da3bcb9"
            ]
        ]
    },
    {
        "id": "ca6091627776ec66",
        "type": "json",
        "z": "af210e86da7125ea",
        "g": "09be53fdb25893ef",
        "name": "",
        "property": "payload",
        "action": "obj",
        "pretty": false,
        "x": 430,
        "y": 180,
        "wires": [
            [
                "929d3f6ea1877a8b"
            ]
        ]
    },
    {
        "id": "929d3f6ea1877a8b",
        "type": "switch",
        "z": "af210e86da7125ea",
        "g": "09be53fdb25893ef",
        "name": "Switch Filter",
        "property": "payload.after.camera",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "chickencoop",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 650,
        "y": 180,
        "wires": [
            [
                "e267d4c99d7ef3d8"
            ]
        ]
    },
    {
        "id": "e267d4c99d7ef3d8",
        "type": "function",
        "z": "af210e86da7125ea",
        "g": "09be53fdb25893ef",
        "name": "Get Frigate Data",
        "func": "var datedFrigateEvent = new Date(msg.payload.after.snapshot_time * 1000);\nnode.status({ fill: \"green\", shape: \"ring\", text: datedFrigateEvent.toLocaleString(\"fr-FR\") });\n\nvar ha_external_url = \"https://domotik.allfabox.fr\";\nmsg.event_id        = msg.payload.after.id;\nmsg.event_datetime  = datedFrigateEvent;\nmsg.snapshot        = ha_external_url + \"/api/frigate/notifications/\" + msg.event_id + \"/snapshot.jpg\";\nmsg.clip            = ha_external_url + \"/api/frigate/notifications/\" + msg.event_id + \"/\" + msg.payload.after.camera + \"/clip.mp4\";\nmsg.thumbnail       = ha_external_url + \"/api/frigate/notifications/\" + msg.event_id + \"/thumbnail.jpg?format=android\";\nmsg.topic           = msg.payload.after.camera + \"-\" + msg.payload.after.label;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 860,
        "y": 180,
        "wires": [
            [
                "7b70be684414259e",
                "5fc5feabf39917ad"
            ]
        ]
    },
    {
        "id": "7b70be684414259e",
        "type": "rbe",
        "z": "af210e86da7125ea",
        "g": "09be53fdb25893ef",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "event_id",
        "topi": "topic",
        "x": 1070,
        "y": 180,
        "wires": [
            [
                "3a1b0a6dbe4c4eeb"
            ]
        ]
    },
    {
        "id": "3a1b0a6dbe4c4eeb",
        "type": "function",
        "z": "af210e86da7125ea",
        "g": "09be53fdb25893ef",
        "name": "Antispams",
        "func": "// INTERVALLE DE 10 MINUTES, 10*60 secondes = 600 secondes, 600*1000 = 600000 ms\n// ENTRE CHAQUE NOTIFICATION\nvar interval = (1000*60*10); // minimum interval between messages (ms)\n//node.warn(interval);\nvar now_timestamp = Date.now();\nvar now = new Date(now_timestamp);\nmsg.interval = now_timestamp - msg.event_datetime;\n//node.warn(now);\n\n// GESTION D'UN COMPTEUR\n// ON INCRÉMENTE JUSQU'À 20 ET ON REMET À 0\n// AU BOUT DE 20 DÉTECTIONS EN MOINS DE 10 MINUTES, ON RENVOIE UNE NOTIFICATION\nvar count = ((context.get(\"counter\") || 0) + 1) % 22;\n// ON ENREGISTRE LA VARIABLE \"counter\" DANS LE CONTEXT DU FLUX\ncontext.set(\"counter\", count);\n//ON CRÉE LA VARIABLEE DANS L'OBJET msg\nmsg.counter = count; \n\nif (msg.interval < interval && count == 1) {\n    // ON TESTE SI L'INTERVALLE DE TEMPS EST PLUS PETIT À 600000ms SOIT 10mins\n    // ET QUE C'EST LA PREMIÈRE NOTIFICATION\n    node.status({ fill: \"green\", shape: \"ring\", text: now.toLocaleString(\"fr-FR\") + \" SEND NOTIFICATION\" });\n    //ON RETOURNE LES DONNÉES POUR FORMATTER LA NOTIFICATION\n    return msg;\n} else if (msg.interval < interval && count > 1) {\n    // ON TESTE SI L'INTERVALLE DE TEMPS EST PLUS PETIT À 600000ms SOIT 10mins\n    // ET QUE CE N'EST PAS LA PREMIÈRE NOTIFICATION\n    node.status({ fill: \"red\", shape: \"ring\", text: now.toLocaleString(\"fr-FR\") + \" - COUNTER LIMIT NOTIFICATION\" });\n} else if (msg.interval > interval) {\n    //SI NON, ON CONTINUE LE FLUX ET ON ENVOIE LA NOTIFICATION\n    node.status({ fill: \"red\", shape: \"ring\", text: now.toLocaleString(\"fr-FR\") + \" TIME BLOCKED NOTIFICATION\" });\n    //ON RETOURNE LES DONNÉES\n    //return msg;\n    //node.warn(count);\n}",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1250,
        "y": 180,
        "wires": [
            [
                "e4a3ead22ff778bc",
                "cd2374f0972e4d4a"
            ]
        ]
    },
    {
        "id": "1474a585ff74f391",
        "type": "comment",
        "z": "af210e86da7125ea",
        "g": "09be53fdb25893ef",
        "name": "First noticication && less than 10 detection",
        "info": " - ",
        "x": 1180,
        "y": 140,
        "wires": []
    },
    {
        "id": "e4a3ead22ff778bc",
        "type": "time-range-switch",
        "z": "af210e86da7125ea",
        "g": "09be53fdb25893ef",
        "name": "",
        "lat": "45.509909",
        "lon": "4.898678",
        "startTime": "dawn",
        "endTime": "dusk",
        "startOffset": 0,
        "endOffset": "-60",
        "x": 1590,
        "y": 180,
        "wires": [
            [
                "f2d21fee33cdeee3"
            ],
            [
                "b2921357ddce9fae"
            ]
        ]
    },
    {
        "id": "b2921357ddce9fae",
        "type": "time-range-switch",
        "z": "af210e86da7125ea",
        "g": "09be53fdb25893ef",
        "name": "",
        "lat": "45.509909",
        "lon": "4.898678",
        "startTime": "dusk",
        "endTime": "dusk",
        "startOffset": "-15",
        "endOffset": "30",
        "x": 1810,
        "y": 320,
        "wires": [
            [
                "541906a304110cec"
            ],
            []
        ]
    },
    {
        "id": "541906a304110cec",
        "type": "function",
        "z": "af210e86da7125ea",
        "g": "09be53fdb25893ef",
        "name": "Format notification",
        "func": "msg.payload = {\"data\":{\n    'title': 'Poulailler 🐔',\n    'message': 'Les poupoules se couchent 💤💤💤 !',\n    'data': {\n        'channel': 'Alert',\n        'importance': 'high',\n        'ledColor': '#00ced1',\n        'image': msg.snapshot,\n        'actions': [\n            {\n                'action': 'URI',\n                'title': 'Visualiser',\n                'uri': '/lovelace/chickencoop'\n            }\n        ]\n    }\n}};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2110,
        "y": 280,
        "wires": [
            [
                "a669f9e9641d454b"
            ]
        ]
    },
    {
        "id": "cc5dde0c096066f6",
        "type": "comment",
        "z": "af210e86da7125ea",
        "g": "09be53fdb25893ef",
        "name": "Détection de mouvement au poulailler",
        "info": "",
        "x": 250,
        "y": 380,
        "wires": []
    },
    {
        "id": "e836209b08fcef9c",
        "type": "mqtt in",
        "z": "af210e86da7125ea",
        "g": "09be53fdb25893ef",
        "name": "",
        "topic": "frigate/events",
        "qos": "0",
        "datatype": "auto-detect",
        "broker": "eb336256f20922f9",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 190,
        "y": 180,
        "wires": [
            [
                "ca6091627776ec66",
                "620de65d8d3b6be4"
            ]
        ]
    },
    {
        "id": "977012b1b843e61c",
        "type": "comment",
        "z": "af210e86da7125ea",
        "g": "09be53fdb25893ef",
        "name": "Détection Frigate \"Bird\"",
        "info": "",
        "x": 220,
        "y": 140,
        "wires": []
    },
    {
        "id": "fe1d1512fdb86fea",
        "type": "comment",
        "z": "af210e86da7125ea",
        "g": "09be53fdb25893ef",
        "name": "Caméra du poulailler",
        "info": "",
        "x": 630,
        "y": 140,
        "wires": []
    },
    {
        "id": "3f67cf9404973b0e",
        "type": "comment",
        "z": "af210e86da7125ea",
        "g": "09be53fdb25893ef",
        "name": "Période de ponte",
        "info": "",
        "x": 1500,
        "y": 140,
        "wires": []
    },
    {
        "id": "c6baac15b0ed10c9",
        "type": "comment",
        "z": "af210e86da7125ea",
        "g": "09be53fdb25893ef",
        "name": "Prise de la photo au déclenchement",
        "info": "",
        "x": 740,
        "y": 460,
        "wires": []
    },
    {
        "id": "fdc5dc212c32430b",
        "type": "server-state-changed",
        "z": "af210e86da7125ea",
        "d": true,
        "g": "09be53fdb25893ef",
        "name": "Détection de mouvement (ON+OFF)",
        "server": "67f9f8146a54c570",
        "version": 5,
        "outputs": 1,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.sonoff_motion_sensor_chickencoop_occupancy",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 260,
        "y": 500,
        "wires": [
            [
                "0e68e644c7c84baa"
            ]
        ]
    },
    {
        "id": "beea059a88205ed2",
        "type": "server-state-changed",
        "z": "af210e86da7125ea",
        "d": true,
        "g": "09be53fdb25893ef",
        "name": "Détection de mouvement (ON)",
        "server": "67f9f8146a54c570",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.sonoff_motion_sensor_chickencoop_occupancy",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 280,
        "y": 420,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "0e68e644c7c84baa",
        "type": "api-call-service",
        "z": "af210e86da7125ea",
        "d": true,
        "g": "09be53fdb25893ef",
        "name": "Snapshot Chickencoop",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "camera",
        "service": "snapshot",
        "areaId": [
            "poulailler"
        ],
        "deviceId": [
            "f8f8482ec727b337236476b6dfb1ba3a"
        ],
        "entityId": [
            "camera.chickencoop"
        ],
        "data": "{\"filename\":\"/config/www/media/snapshots/chickencoop/snapshot.jpg\"}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 750,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "b0626bcf6fc413d9",
        "type": "inject",
        "z": "af210e86da7125ea",
        "g": "09be53fdb25893ef",
        "name": "Frigate JSON",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"before\":{\"id\":\"1659469860.396931-3ym8i0\",\"camera\":\"chickencoop\",\"frame_time\":1659470156.859536,\"snapshot_time\":1659469860.482543,\"label\":\"person\",\"top_score\":0.80078125,\"false_positive\":false,\"start_time\":1659469860.396931,\"end_time\":null,\"score\":0.51171875,\"box\":[-3,1,347,275],\"area\":95900,\"region\":[0,0,448,448],\"stationary\":false,\"motionless_count\":17,\"position_changes\":1,\"current_zones\":[],\"entered_zones\":[],\"has_clip\":true,\"has_snapshot\":true},\"after\":{\"id\":\"1659469860.396931-3ym8i0\",\"camera\":\"chickencoop\",\"frame_time\":1659470157.136417,\"snapshot_time\":1659469860.482543,\"label\":\"person\",\"top_score\":0.80078125,\"false_positive\":false,\"start_time\":1659469860.396931,\"end_time\":1659470290.009398,\"score\":0.51171875,\"box\":[-3,1,347,275],\"area\":95900,\"region\":[0,0,448,448],\"stationary\":false,\"motionless_count\":18,\"position_changes\":1,\"current_zones\":[],\"entered_zones\":[],\"has_clip\":true,\"has_snapshot\":true},\"type\":\"end\"}",
        "payloadType": "json",
        "x": 190,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "f2d21fee33cdeee3",
        "type": "function",
        "z": "af210e86da7125ea",
        "g": "09be53fdb25893ef",
        "name": "Format notification",
        "func": "msg.payload = {\"data\":{\n    'title': 'Poulailler 🐔',\n    'message': 'Une poupoule va pondre 🥚🥚🥚 !',\n    'data': {\n        'channel': 'Alert',\n        'importance': 'high',\n        'ledColor': '#00ced1',\n        'image': msg.snapshot,\n        'actions': [\n            {\n                'action': 'URI',\n                'title': 'Visualiser',\n                'uri': '/lovelace/chickencoop'\n            }\n        ]\n    }\n}};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1890,
        "y": 160,
        "wires": [
            [
                "269ca801a532f7ce"
            ]
        ]
    },
    {
        "id": "269ca801a532f7ce",
        "type": "api-call-service",
        "z": "af210e86da7125ea",
        "g": "09be53fdb25893ef",
        "name": "",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": true,
        "domain": "notify",
        "service": "all_hass_members",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "msg.payload",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 2290,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "8d60ad8c47919050",
        "type": "comment",
        "z": "af210e86da7125ea",
        "g": "09be53fdb25893ef",
        "name": "Ponte - Notification sur le portable",
        "info": "",
        "x": 1920,
        "y": 120,
        "wires": []
    },
    {
        "id": "a9e95bbb464bd0f1",
        "type": "comment",
        "z": "af210e86da7125ea",
        "g": "09be53fdb25893ef",
        "name": "Dodo - Notification sur le portable",
        "info": "",
        "x": 1790,
        "y": 380,
        "wires": []
    },
    {
        "id": "a669f9e9641d454b",
        "type": "api-call-service",
        "z": "af210e86da7125ea",
        "g": "09be53fdb25893ef",
        "name": "",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": true,
        "domain": "notify",
        "service": "all_hass_members",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "msg.payload",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 2350,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "620de65d8d3b6be4",
        "type": "debug",
        "z": "af210e86da7125ea",
        "d": true,
        "g": "09be53fdb25893ef",
        "name": "MQTT Frigate Event",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 440,
        "y": 240,
        "wires": []
    },
    {
        "id": "5fc5feabf39917ad",
        "type": "debug",
        "z": "af210e86da7125ea",
        "d": true,
        "g": "09be53fdb25893ef",
        "name": "Frigate formatted data",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "event_datetime",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1040,
        "y": 300,
        "wires": []
    },
    {
        "id": "cd2374f0972e4d4a",
        "type": "debug",
        "z": "af210e86da7125ea",
        "d": true,
        "g": "09be53fdb25893ef",
        "name": "Counter",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "counter",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1400,
        "y": 280,
        "wires": []
    },
    {
        "id": "837c412edd20b1ab",
        "type": "server-state-changed",
        "z": "af210e86da7125ea",
        "g": "51da21cfd7ebf106",
        "name": "Portier du poulailler",
        "server": "67f9f8146a54c570",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "sensor.sonoff_doorwindow_inverted_sensor_main_chickencoop",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 190,
        "y": 720,
        "wires": [
            [
                "cd0f570e75108444"
            ],
            [
                "faf8d80fbdccf2b2"
            ]
        ]
    },
    {
        "id": "5e4273c703098c3e",
        "type": "comment",
        "z": "af210e86da7125ea",
        "g": "51da21cfd7ebf106",
        "name": "Portier ouvert",
        "info": "",
        "x": 630,
        "y": 640,
        "wires": []
    },
    {
        "id": "cd0f570e75108444",
        "type": "api-call-service",
        "z": "af210e86da7125ea",
        "g": "51da21cfd7ebf106",
        "name": "Notification groupée",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "all_hass_members",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t   \"title\":\"Poulailler 🐔\",\t   \"message\": \"Le portier est ouvert 🐔🚪\",\t   \"data\": {\t       \"channel\": \"Alert\",\t       \"importance\": \"high\",\t       \"ledColor\": \"#00ced1\"\t    }\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 660,
        "y": 680,
        "wires": [
            []
        ]
    },
    {
        "id": "36d6b8effb06de08",
        "type": "comment",
        "z": "af210e86da7125ea",
        "g": "51da21cfd7ebf106",
        "name": "Portier fermée",
        "info": "",
        "x": 630,
        "y": 760,
        "wires": []
    },
    {
        "id": "faf8d80fbdccf2b2",
        "type": "api-call-service",
        "z": "af210e86da7125ea",
        "g": "51da21cfd7ebf106",
        "name": "Notification groupée",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "all_hass_members",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t   \"title\":\"Poulailler 🐔\",\t   \"message\": \"Le portier est fermé 🐔🚪\",\t   \"data\": {\t       \"channel\": \"Alert\",\t       \"importance\": \"high\",\t       \"ledColor\": \"#00ced1\"\t    }\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 660,
        "y": 800,
        "wires": [
            []
        ]
    },
    {
        "id": "e264767476a0c59c",
        "type": "server-state-changed",
        "z": "bbfee81ec5710813",
        "g": "0136400a60e9cdae",
        "name": "Capteur d'ouverture - Portail",
        "server": "67f9f8146a54c570",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.xiaomi_aqara_doorwindow_sensor_portal_contact",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "60",
        "forType": "num",
        "forUnits": "seconds",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 200,
        "y": 200,
        "wires": [
            [
                "80154b2f2d109cfd"
            ],
            [
                "40eaf4470dfa8ba3"
            ]
        ]
    },
    {
        "id": "80154b2f2d109cfd",
        "type": "api-call-service",
        "z": "bbfee81ec5710813",
        "g": "0136400a60e9cdae",
        "name": "Notification groupée",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "all_hass_members",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t   \"title\":\"Portail 🚗\",\t   \"message\": \"Le portail est ouvert 🚪\",\t   \"data\": {\t       \"channel\": \"Alert\",\t       \"importance\": \"high\",\t       \"ledColor\": \"#00ced1\"\t    }\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 740,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "b8647530bd171ead",
        "type": "comment",
        "z": "bbfee81ec5710813",
        "g": "0136400a60e9cdae",
        "name": "Portail ouvert",
        "info": "",
        "x": 710,
        "y": 100,
        "wires": []
    },
    {
        "id": "40eaf4470dfa8ba3",
        "type": "api-call-service",
        "z": "bbfee81ec5710813",
        "g": "0136400a60e9cdae",
        "name": "Notification groupée",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "all_hass_members",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t   \"title\":\"Portail 🚗\",\t   \"message\": \"Le portail est fermé 🚪\",\t   \"data\": {\t       \"channel\": \"Alert\",\t       \"importance\": \"high\",\t       \"ledColor\": \"#00ced1\"\t    }\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 740,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "e37bc9065cf5481d",
        "type": "comment",
        "z": "bbfee81ec5710813",
        "g": "0136400a60e9cdae",
        "name": "Portail fermé",
        "info": "",
        "x": 710,
        "y": 220,
        "wires": []
    },
    {
        "id": "b5d28ddd2e14aa4e",
        "type": "server-state-changed",
        "z": "bbfee81ec5710813",
        "g": "0136400a60e9cdae",
        "name": "Capteur d'ouverture - Portail",
        "server": "67f9f8146a54c570",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.xiaomi_aqara_doorwindow_sensor_portal_contact",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "15",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 200,
        "y": 380,
        "wires": [
            [
                "d653058370f83e1b"
            ],
            []
        ]
    },
    {
        "id": "2e9786e00f828749",
        "type": "comment",
        "z": "bbfee81ec5710813",
        "g": "0136400a60e9cdae",
        "name": "Ouvert depuis 15 minutes",
        "info": "",
        "x": 210,
        "y": 340,
        "wires": []
    },
    {
        "id": "d653058370f83e1b",
        "type": "api-call-service",
        "z": "bbfee81ec5710813",
        "g": "0136400a60e9cdae",
        "name": "Notification groupée",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "all_hass_members",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t   \"title\":\"Portail 🚗\",\t   \"message\": \"🚪🚨🚨🚨 Le portail est ouvert depuis 15 minutes 🚨🚨🚨🚪\",\t   \"data\": {\t       \"channel\": \"Alert\",\t       \"importance\": \"high\",\t       \"ledColor\": \"#00ced1\"\t    }\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 740,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "d0c650880cfabfc8",
        "type": "mqtt in",
        "z": "2209105bf5897af5",
        "name": "",
        "topic": "frigate/events",
        "qos": "0",
        "datatype": "auto",
        "broker": "eb336256f20922f9",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 290,
        "y": 240,
        "wires": [
            [
                "068686dafb4a9f86"
            ]
        ]
    },
    {
        "id": "068686dafb4a9f86",
        "type": "json",
        "z": "2209105bf5897af5",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 530,
        "y": 240,
        "wires": [
            [
                "31356cc6c1cd989a"
            ]
        ]
    },
    {
        "id": "31356cc6c1cd989a",
        "type": "debug",
        "z": "2209105bf5897af5",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload['after']['id']",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 810,
        "y": 240,
        "wires": []
    },
    {
        "id": "96b2bc6d4aeaa6dd",
        "type": "api-call-service",
        "z": "9914abfb95fb25de",
        "name": "",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": true,
        "domain": "input_boolean",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.notify_home"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 540,
        "y": 100,
        "wires": [
            [
                "136d53b9daaa824d"
            ]
        ]
    },
    {
        "id": "2ce19b97a3bd7056",
        "type": "api-call-service",
        "z": "9914abfb95fb25de",
        "name": "",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "input_boolean",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.notify_home"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 540,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "136d53b9daaa824d",
        "type": "api-call-service",
        "z": "9914abfb95fb25de",
        "name": "",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": true,
        "domain": "notify",
        "service": "mobile_app_nothing_phone_a2",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t    \"message\":\"Fabien est à la maison\",\t    \"title\":\"Home Assistant - Maison\",\t    \"data\": {\t      \"channel\": \"Alert\",\t      \"importance\": \"high\",\t      \"ledColor\": \"#00ced1\"\t    }\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 900,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "2e4c4b0e585d6757",
        "type": "trigger-state",
        "z": "9914abfb95fb25de",
        "name": "Left Home",
        "server": "67f9f8146a54c570",
        "version": 4,
        "inputs": 0,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "person.fabien_allamanche",
        "entityIdType": "exact",
        "debugEnabled": false,
        "constraints": [
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "home"
            },
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "not_home"
            }
        ],
        "customOutputs": [],
        "outputInitially": false,
        "stateType": "str",
        "enableInput": false,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "x": 160,
        "y": 680,
        "wires": [
            [
                "bf84257c72bd2b85"
            ],
            []
        ]
    },
    {
        "id": "bf84257c72bd2b85",
        "type": "api-call-service",
        "z": "9914abfb95fb25de",
        "name": "Notify",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "mobile_app_nothing_phone_a2",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t   \"message\": \"The \" & $join($entities().*[state = \"on\" and entity_id ~> /^light|^switch/].attributes.friendly_name, \", \") & \" are on.\",\t   \"title\": \"Left On\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "data"
            }
        ],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "msg",
        "x": 370,
        "y": 680,
        "wires": [
            []
        ]
    },
    {
        "id": "466bbc739f1f101b",
        "type": "comment",
        "z": "9914abfb95fb25de",
        "name": "Extinction des lumières si personne n'est à la maison",
        "info": "",
        "x": 270,
        "y": 620,
        "wires": []
    },
    {
        "id": "e2cb987406fb55a0",
        "type": "trigger-state",
        "z": "9914abfb95fb25de",
        "name": "Fabien : maison ?",
        "server": "67f9f8146a54c570",
        "version": 4,
        "inputs": 0,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "person.fabien_allamanche",
        "entityIdType": "exact",
        "debugEnabled": false,
        "constraints": [
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "home"
            },
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "not_home"
            }
        ],
        "customOutputs": [],
        "outputInitially": false,
        "stateType": "str",
        "enableInput": false,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "x": 210,
        "y": 140,
        "wires": [
            [
                "96b2bc6d4aeaa6dd"
            ],
            [
                "2ce19b97a3bd7056"
            ]
        ]
    },
    {
        "id": "ac7c1266abcbfc92",
        "type": "comment",
        "z": "9914abfb95fb25de",
        "name": "Fabien est-il à la maison",
        "info": "",
        "x": 210,
        "y": 100,
        "wires": []
    },
    {
        "id": "c78ee62ebe6e435e",
        "type": "comment",
        "z": "9914abfb95fb25de",
        "name": "Oui",
        "info": "",
        "x": 490,
        "y": 60,
        "wires": []
    },
    {
        "id": "eaf7736413f2b150",
        "type": "comment",
        "z": "9914abfb95fb25de",
        "name": "Notification sur le portable",
        "info": "",
        "x": 870,
        "y": 60,
        "wires": []
    },
    {
        "id": "d85f0d6597bd8b51",
        "type": "comment",
        "z": "9914abfb95fb25de",
        "name": "Non",
        "info": "",
        "x": 490,
        "y": 180,
        "wires": []
    },
    {
        "id": "63670c28c0e00a8c",
        "type": "ha-tag",
        "z": "20f09a7263a738c7",
        "name": "",
        "server": "67f9f8146a54c570",
        "version": 2,
        "exposeAsEntityConfig": "",
        "tags": [
            "15016935-6935-4504-aff3-b3ba1dd5c6aa"
        ],
        "devices": [],
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 430,
        "y": 300,
        "wires": [
            [
                "025eeaca8cc7200a",
                "dcb9ab45b531fa35"
            ]
        ]
    },
    {
        "id": "025eeaca8cc7200a",
        "type": "debug",
        "z": "20f09a7263a738c7",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 260,
        "wires": []
    },
    {
        "id": "dcb9ab45b531fa35",
        "type": "debug",
        "z": "20f09a7263a738c7",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "topic",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 640,
        "y": 340,
        "wires": []
    },
    {
        "id": "190891f8.377506",
        "type": "inject",
        "z": "7b717244f7527f26",
        "d": true,
        "g": "33c35b0c10a45413",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 230,
        "y": 100,
        "wires": [
            [
                "4fea9ce2.4725cc",
                "3c922d1a.4ec682",
                "e9e897f3.f23db8",
                "e3288390.06fad",
                "cab8a0fe.d50278",
                "a283a279.87395",
                "82edd4e3.7517a8",
                "856447c4.9b118"
            ]
        ]
    },
    {
        "id": "4fea9ce2.4725cc",
        "type": "moment",
        "z": "7b717244f7527f26",
        "g": "33c35b0c10a45413",
        "name": "-> Berlin, DD.MM.YYYY HH:mm",
        "topic": "",
        "input": "",
        "inputType": "msg",
        "inTz": "Europe/Berlin",
        "adjAmount": 0,
        "adjType": "days",
        "adjDir": "add",
        "format": "DD.MM.YYYY HH:mm",
        "locale": "de_DE",
        "output": "",
        "outputType": "msg",
        "outTz": "Europe/Berlin",
        "x": 520,
        "y": 160,
        "wires": [
            [
                "7d005619.57e83"
            ]
        ]
    },
    {
        "id": "3c922d1a.4ec682",
        "type": "debug",
        "z": "7b717244f7527f26",
        "d": true,
        "g": "33c35b0c10a45413",
        "name": "",
        "active": true,
        "tosidebar": false,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 460,
        "y": 100,
        "wires": []
    },
    {
        "id": "7d005619.57e83",
        "type": "debug",
        "z": "7b717244f7527f26",
        "g": "33c35b0c10a45413",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 800,
        "y": 160,
        "wires": []
    },
    {
        "id": "4eef0593.5d0e24",
        "type": "debug",
        "z": "7b717244f7527f26",
        "g": "33c35b0c10a45413",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 800,
        "y": 220,
        "wires": []
    },
    {
        "id": "e9e897f3.f23db8",
        "type": "moment",
        "z": "7b717244f7527f26",
        "g": "33c35b0c10a45413",
        "name": "-> Berlin, LLL, de_DE",
        "topic": "",
        "input": "",
        "inputType": "msg",
        "inTz": "Europe/Berlin",
        "adjAmount": "1",
        "adjType": "months",
        "adjDir": "add",
        "format": "LLL",
        "locale": "de_DE",
        "output": "",
        "outputType": "msg",
        "outTz": "Europe/Berlin",
        "x": 490,
        "y": 220,
        "wires": [
            [
                "4eef0593.5d0e24"
            ]
        ]
    },
    {
        "id": "d0d9146d.59da38",
        "type": "debug",
        "z": "7b717244f7527f26",
        "g": "33c35b0c10a45413",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 800,
        "y": 280,
        "wires": []
    },
    {
        "id": "e3288390.06fad",
        "type": "moment",
        "z": "7b717244f7527f26",
        "g": "33c35b0c10a45413",
        "name": "-> Berlin, LLL, en_EN",
        "topic": "",
        "input": "",
        "inputType": "msg",
        "inTz": "Europe/Berlin",
        "adjAmount": "1",
        "adjType": "months",
        "adjDir": "add",
        "format": "LLL",
        "locale": "en_EN",
        "output": "",
        "outputType": "msg",
        "outTz": "Europe/Berlin",
        "x": 490,
        "y": 280,
        "wires": [
            [
                "d0d9146d.59da38"
            ]
        ]
    },
    {
        "id": "cab8a0fe.d50278",
        "type": "moment",
        "z": "7b717244f7527f26",
        "g": "33c35b0c10a45413",
        "name": "-> Berlin",
        "topic": "",
        "input": "",
        "inputType": "msg",
        "inTz": "Europe/Berlin",
        "adjAmount": 0,
        "adjType": "days",
        "adjDir": "add",
        "format": "[Date: ]YYYY-MM-DD  [Time: ]HH:mm:ss",
        "locale": "de_DE",
        "output": "",
        "outputType": "msg",
        "outTz": "Europe/Berlin",
        "x": 440,
        "y": 340,
        "wires": [
            [
                "757e3575.b97ea4"
            ]
        ]
    },
    {
        "id": "757e3575.b97ea4",
        "type": "debug",
        "z": "7b717244f7527f26",
        "g": "33c35b0c10a45413",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 800,
        "y": 340,
        "wires": []
    },
    {
        "id": "e48a268c.7470a8",
        "type": "debug",
        "z": "7b717244f7527f26",
        "g": "33c35b0c10a45413",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 800,
        "y": 400,
        "wires": []
    },
    {
        "id": "a283a279.87395",
        "type": "moment",
        "z": "7b717244f7527f26",
        "g": "33c35b0c10a45413",
        "name": "-> Berlin, LLL, it_IT",
        "topic": "",
        "input": "",
        "inputType": "msg",
        "inTz": "Europe/Berlin",
        "adjAmount": "1",
        "adjType": "months",
        "adjDir": "add",
        "format": "LLL",
        "locale": "it_IT",
        "output": "",
        "outputType": "msg",
        "outTz": "Europe/Berlin",
        "x": 480,
        "y": 400,
        "wires": [
            [
                "e48a268c.7470a8"
            ]
        ]
    },
    {
        "id": "e4176e86.fd4f28",
        "type": "debug",
        "z": "7b717244f7527f26",
        "g": "33c35b0c10a45413",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 800,
        "y": 460,
        "wires": []
    },
    {
        "id": "82edd4e3.7517a8",
        "type": "moment",
        "z": "7b717244f7527f26",
        "g": "33c35b0c10a45413",
        "name": "-> Berlin, calendar",
        "topic": "",
        "input": "",
        "inputType": "msg",
        "inTz": "Europe/Berlin",
        "adjAmount": "1",
        "adjType": "months",
        "adjDir": "add",
        "format": "calendar",
        "locale": "en_EN",
        "output": "",
        "outputType": "msg",
        "outTz": "Europe/Berlin",
        "x": 480,
        "y": 460,
        "wires": [
            [
                "e4176e86.fd4f28"
            ]
        ]
    },
    {
        "id": "856447c4.9b118",
        "type": "moment",
        "z": "7b717244f7527f26",
        "g": "33c35b0c10a45413",
        "name": "-> Berlin, fromNow",
        "topic": "",
        "input": "",
        "inputType": "msg",
        "inTz": "Europe/Berlin",
        "adjAmount": "1",
        "adjType": "months",
        "adjDir": "add",
        "format": "fromNow",
        "locale": "en_EN",
        "output": "",
        "outputType": "msg",
        "outTz": "Europe/Berlin",
        "x": 480,
        "y": 520,
        "wires": [
            [
                "dbfff1bf.047e48"
            ]
        ]
    },
    {
        "id": "dbfff1bf.047e48",
        "type": "debug",
        "z": "7b717244f7527f26",
        "g": "33c35b0c10a45413",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 800,
        "y": 520,
        "wires": []
    },
    {
        "id": "d4f1e907.c039a",
        "type": "inject",
        "z": "7b717244f7527f26",
        "g": "b428f559e6f3fdb3",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "",
        "payload": "1",
        "payloadType": "num",
        "x": 250,
        "y": 800,
        "wires": [
            [
                "b69a68f2.86227"
            ]
        ]
    },
    {
        "id": "b69a68f2.86227",
        "type": "humanizer",
        "z": "7b717244f7527f26",
        "g": "b428f559e6f3fdb3",
        "name": "",
        "input": "",
        "x": 690,
        "y": 800,
        "wires": [
            [
                "98a09560.d0f7c8"
            ]
        ]
    },
    {
        "id": "98a09560.d0f7c8",
        "type": "debug",
        "z": "7b717244f7527f26",
        "d": true,
        "g": "b428f559e6f3fdb3",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload.humanized",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 1000,
        "y": 800,
        "wires": []
    },
    {
        "id": "26b90e19.ec32ea",
        "type": "inject",
        "z": "7b717244f7527f26",
        "g": "b428f559e6f3fdb3",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "",
        "payload": "10",
        "payloadType": "num",
        "x": 430,
        "y": 820,
        "wires": [
            [
                "b69a68f2.86227"
            ]
        ]
    },
    {
        "id": "6969869b.9661a8",
        "type": "inject",
        "z": "7b717244f7527f26",
        "g": "b428f559e6f3fdb3",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "",
        "payload": "44",
        "payloadType": "num",
        "x": 250,
        "y": 880,
        "wires": [
            [
                "b69a68f2.86227"
            ]
        ]
    },
    {
        "id": "8f921df4.df755",
        "type": "inject",
        "z": "7b717244f7527f26",
        "g": "b428f559e6f3fdb3",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "",
        "payload": "90",
        "payloadType": "num",
        "x": 430,
        "y": 940,
        "wires": [
            [
                "b69a68f2.86227"
            ]
        ]
    },
    {
        "id": "bd2fd2a3.3d0b88",
        "type": "inject",
        "z": "7b717244f7527f26",
        "g": "b428f559e6f3fdb3",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "",
        "payload": "2669",
        "payloadType": "num",
        "x": 250,
        "y": 1040,
        "wires": [
            [
                "b69a68f2.86227"
            ]
        ]
    },
    {
        "id": "4d1b6b65.285d2c",
        "type": "inject",
        "z": "7b717244f7527f26",
        "g": "b428f559e6f3fdb3",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "",
        "payload": "2670",
        "payloadType": "num",
        "x": 430,
        "y": 1040,
        "wires": [
            [
                "b69a68f2.86227"
            ]
        ]
    },
    {
        "id": "6850f375.2dccdc",
        "type": "inject",
        "z": "7b717244f7527f26",
        "g": "b428f559e6f3fdb3",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "",
        "payload": "77399",
        "payloadType": "num",
        "x": 250,
        "y": 1100,
        "wires": [
            [
                "b69a68f2.86227"
            ]
        ]
    },
    {
        "id": "67e9d190.0bc4f",
        "type": "inject",
        "z": "7b717244f7527f26",
        "g": "b428f559e6f3fdb3",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "",
        "payload": "77400",
        "payloadType": "num",
        "x": 430,
        "y": 1100,
        "wires": [
            [
                "b69a68f2.86227"
            ]
        ]
    },
    {
        "id": "86e0a151.259b28",
        "type": "inject",
        "z": "7b717244f7527f26",
        "g": "b428f559e6f3fdb3",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "",
        "payload": "27612332",
        "payloadType": "num",
        "x": 270,
        "y": 1160,
        "wires": [
            [
                "b69a68f2.86227"
            ]
        ]
    },
    {
        "id": "ad2a6077.ddcdb8",
        "type": "inject",
        "z": "7b717244f7527f26",
        "g": "b428f559e6f3fdb3",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "",
        "payload": "45",
        "payloadType": "num",
        "x": 430,
        "y": 880,
        "wires": [
            [
                "b69a68f2.86227"
            ]
        ]
    },
    {
        "id": "ffe556c3.2b9f78",
        "type": "inject",
        "z": "7b717244f7527f26",
        "g": "b428f559e6f3fdb3",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "",
        "payload": "89",
        "payloadType": "num",
        "x": 250,
        "y": 940,
        "wires": [
            [
                "b69a68f2.86227"
            ]
        ]
    },
    {
        "id": "6e52a601.24ab18",
        "type": "comment",
        "z": "7b717244f7527f26",
        "g": "b428f559e6f3fdb3",
        "name": "seconds -> minutes",
        "info": "",
        "x": 720,
        "y": 880,
        "wires": []
    },
    {
        "id": "861de75a.77fa9",
        "type": "comment",
        "z": "7b717244f7527f26",
        "g": "b428f559e6f3fdb3",
        "name": "1 minute -> 2 minutes",
        "info": "",
        "x": 730,
        "y": 940,
        "wires": []
    },
    {
        "id": "78e43b8.ee91844",
        "type": "comment",
        "z": "7b717244f7527f26",
        "g": "b428f559e6f3fdb3",
        "name": "2 minutes -> 3 minutes",
        "info": "",
        "x": 730,
        "y": 980,
        "wires": []
    },
    {
        "id": "64ed3c6f.2abaac",
        "type": "inject",
        "z": "7b717244f7527f26",
        "g": "b428f559e6f3fdb3",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "",
        "payload": "150",
        "payloadType": "num",
        "x": 430,
        "y": 980,
        "wires": [
            [
                "b69a68f2.86227"
            ]
        ]
    },
    {
        "id": "392a1ef8.e68542",
        "type": "inject",
        "z": "7b717244f7527f26",
        "g": "b428f559e6f3fdb3",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "",
        "payload": "149",
        "payloadType": "num",
        "x": 250,
        "y": 980,
        "wires": [
            [
                "b69a68f2.86227"
            ]
        ]
    },
    {
        "id": "aa8e7959.37184",
        "type": "comment",
        "z": "7b717244f7527f26",
        "g": "b428f559e6f3fdb3",
        "name": "44 minutes -> 1 hour",
        "info": "",
        "x": 720,
        "y": 1040,
        "wires": []
    },
    {
        "id": "15094e69.c47492",
        "type": "comment",
        "z": "7b717244f7527f26",
        "g": "b428f559e6f3fdb3",
        "name": "21 minutes -> 1 day",
        "info": "",
        "x": 720,
        "y": 1100,
        "wires": []
    },
    {
        "id": "fe7ccdb4.4deee8",
        "type": "inject",
        "z": "7b717244f7527f26",
        "g": "b428f559e6f3fdb3",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "",
        "payload": "27612333",
        "payloadType": "num",
        "x": 450,
        "y": 1160,
        "wires": [
            [
                "b69a68f2.86227"
            ]
        ]
    },
    {
        "id": "237ff9ca.f8d1ee",
        "type": "comment",
        "z": "7b717244f7527f26",
        "g": "b428f559e6f3fdb3",
        "name": "10 months -> 1 year",
        "info": "",
        "x": 720,
        "y": 1160,
        "wires": []
    },
    {
        "id": "bb9c80ff.83516",
        "type": "inject",
        "z": "7b717244f7527f26",
        "g": "b428f559e6f3fdb3",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "",
        "payload": "300000000",
        "payloadType": "num",
        "x": 270,
        "y": 1200,
        "wires": [
            [
                "b69a68f2.86227"
            ]
        ]
    },
    {
        "id": "bc9cfad2.10a04",
        "type": "comment",
        "z": "7b717244f7527f26",
        "g": "b428f559e6f3fdb3",
        "name": "several years",
        "info": "",
        "x": 700,
        "y": 1200,
        "wires": []
    },
    {
        "id": "826ad9dc629ede97",
        "type": "mqtt in",
        "z": "89f35d0e7f2f36e7",
        "d": true,
        "name": "",
        "topic": "zigbee2mqtt/sonoff_motion_sensor_toilet",
        "qos": "2",
        "datatype": "auto",
        "broker": "eb336256f20922f9",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 500,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "c27294d0092deb20",
        "type": "mqtt in",
        "z": "89f35d0e7f2f36e7",
        "d": true,
        "name": "",
        "topic": "zigbee2mqtt/#",
        "qos": "2",
        "datatype": "auto",
        "broker": "eb336256f20922f9",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 410,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "96862cfab4a68d72",
        "type": "api-current-state",
        "z": "89f35d0e7f2f36e7",
        "name": "Home Weather",
        "server": "67f9f8146a54c570",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "weather.maison",
        "state_type": "str",
        "blockInputOverrides": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 560,
        "y": 660,
        "wires": [
            [
                "3d22eeede91f4c9b"
            ]
        ]
    },
    {
        "id": "dd11478c326721df",
        "type": "inject",
        "z": "89f35d0e7f2f36e7",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 240,
        "y": 660,
        "wires": [
            [
                "36c71cae3ba4f771",
                "42a73a47f87b1b17",
                "96862cfab4a68d72"
            ]
        ]
    },
    {
        "id": "50c6f0fb59536843",
        "type": "inject",
        "z": "89f35d0e7f2f36e7",
        "d": true,
        "g": "58cb65c46e615c58",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 280,
        "y": 180,
        "wires": [
            [
                "04b2e790f30c5a63"
            ]
        ]
    },
    {
        "id": "04b2e790f30c5a63",
        "type": "api-call-service",
        "z": "89f35d0e7f2f36e7",
        "g": "58cb65c46e615c58",
        "name": "",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "camera",
        "service": "snapshot",
        "areaId": [],
        "deviceId": [
            "f8f8482ec727b337236476b6dfb1ba3a"
        ],
        "entityId": [],
        "data": "{\"filename\":\"/config/www/snapshots/chickencoop/snapshot.jpg\"}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 570,
        "y": 180,
        "wires": [
            [
                "7ed283dc8605be9a"
            ]
        ]
    },
    {
        "id": "7ed283dc8605be9a",
        "type": "delay",
        "z": "89f35d0e7f2f36e7",
        "g": "58cb65c46e615c58",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 820,
        "y": 180,
        "wires": [
            [
                "325e6e3d6f7869d5"
            ]
        ]
    },
    {
        "id": "325e6e3d6f7869d5",
        "type": "api-call-service",
        "z": "89f35d0e7f2f36e7",
        "g": "58cb65c46e615c58",
        "name": "",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": true,
        "domain": "notify",
        "service": "mobile_app_nothing_phone_a2",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t    \"title\":\"Poulailler 🐔\",\t    \"message\":\"Alerte Poupoule ! Test test 🧪🧪 !\",\t    \"data\": {\t        \"channel\": \"Alert\",\t        \"importance\": \"high\",\t        \"ledColor\": \"#00ced1\",\t        \"image\": \"/local/snapshots/chickencoop/chickencoop-snapshot.jpeg\",\t        \"actions\": [\t            {\t                \"action\": \"URI\",\t                \"title\": \"Visualiser\",\t                \"uri\": \"/lovelace/chickencoop\"\t            }\t        ]\t    }\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1100,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "3d22eeede91f4c9b",
        "type": "function",
        "z": "89f35d0e7f2f36e7",
        "name": "Format EN>FR",
        "func": "let weather_state = msg.payload;\n\nif (weather_state == 'clear-night') {\n\tweather_state = 'nuit-claire'\n} else if (weather_state == 'cloudy') {\n\tweather_state = 'nuageux';\n} else if (weather_state == 'exceptional'){\n\tweather_state = 'exceptionnel';\n} else if (weather_state == 'fog'){\n\tweather_state = 'brumeux';\n} else if (weather_state == 'hail'){\n\tweather_state = 'grêleux';\n} else if (weather_state == 'lightning'){\n\tweather_state = 'orageux';\n} else if (weather_state == 'lightning-rainy'){\n\tweather_state = 'orageux et pluvieux';\n} else if (weather_state == 'partlycloudy'){\n\tweather_state = 'partiellement nuageux';\n} else if (weather_state == 'pouring'){\n\tweather_state = 'humide';\n} else if (weather_state == 'rainy'){\n\tweather_state = 'pluvieux';\n} else if (weather_state == 'snowy'){\n\tweather_state = 'neigeux';\n} else if (weather_state == 'snowy-rainy'){\n\tweather_state = 'neigeux et pluvieux' ;\n} else if (weather_state == 'sunny'){\n\tweather_state = 'ensoleillé';\n} else if (weather_state == 'windy'){\n\tweather_state = 'venteux';\n}\n\nlet temperature = msg.data.attributes.temperature;\nlet humidity = msg.data.attributes.humidity;\nlet windspeed = msg.data.attributes.wind_speed;\nlet windbearing = msg.data.attributes.wind_bearing;\nlet rain = msg.data.attributes.forecast[0].precipitation;\n\n//msg.payload = '{\"message\": \"Bonjour chers maîtres ! Il semble qu''aujourd''hui le temps sera '+ weather_state +', avec une température de '+ temperature +' degrés, une humidité de '+ humidity +'%, la vitesse du vent sera de '+ windspeed +' mètres par seconde et un risque de précipitation de '+ rain +'mm de pluie. Profitez-bien de votre journée ! Bisous bisous !\", \"language\": \"fr\"}';\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 860,
        "y": 660,
        "wires": [
            [
                "c1ef92949846e7eb",
                "5df00f8e0a523a2d"
            ]
        ]
    },
    {
        "id": "d567f559e318567e",
        "type": "comment",
        "z": "89f35d0e7f2f36e7",
        "name": "Météo du jour",
        "info": "",
        "x": 550,
        "y": 620,
        "wires": []
    },
    {
        "id": "b3149f8c800055f7",
        "type": "comment",
        "z": "89f35d0e7f2f36e7",
        "name": "en >> fr",
        "info": "",
        "x": 830,
        "y": 620,
        "wires": []
    },
    {
        "id": "36c71cae3ba4f771",
        "type": "api-current-state",
        "z": "89f35d0e7f2f36e7",
        "name": "Current Exterior Temperature",
        "server": "67f9f8146a54c570",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "sensor.xiaomi_aqara_tph_sensor_terrasse_temperature",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 600,
        "y": 720,
        "wires": [
            []
        ]
    },
    {
        "id": "42a73a47f87b1b17",
        "type": "api-current-state",
        "z": "89f35d0e7f2f36e7",
        "name": "Current Exterior Humidity",
        "server": "67f9f8146a54c570",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "sensor.xiaomi_aqara_tph_sensor_terrasse_humidity",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 590,
        "y": 780,
        "wires": [
            []
        ]
    },
    {
        "id": "c1ef92949846e7eb",
        "type": "debug",
        "z": "89f35d0e7f2f36e7",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "data.attributes",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1150,
        "y": 660,
        "wires": []
    },
    {
        "id": "e0ed91a41730bbe1",
        "type": "api-call-service",
        "z": "89f35d0e7f2f36e7",
        "name": "Bonjour !",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "tts",
        "service": "google_say",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.lenovo_smart_clock_kitchen"
        ],
        "data": "{\"message\":\"Bonjour Blandine, Bonjou Fabien. Il est l'heure de se lever.  Vous allez être en retard !\",\"language\":\"fr\"}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1360,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "e0d61d5ecb18bf3c",
        "type": "api-call-service",
        "z": "89f35d0e7f2f36e7",
        "name": "Sound level",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "media_player",
        "service": "volume_set",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.lenovo_smart_clock_kitchen"
        ],
        "data": "{\"volume_level\":0.05}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1070,
        "y": 580,
        "wires": [
            [
                "e0ed91a41730bbe1"
            ]
        ]
    },
    {
        "id": "5df00f8e0a523a2d",
        "type": "debug",
        "z": "89f35d0e7f2f36e7",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1070,
        "y": 460,
        "wires": []
    },
    {
        "id": "9e6662c243056c61",
        "type": "server-state-changed",
        "z": "e47116f2e9504c6c",
        "name": "Aqara Cube T1 Pro",
        "server": "67f9f8146a54c570",
        "version": 5,
        "outputs": 1,
        "exposeAsEntityConfig": "",
        "entityId": "sensor.xiaomi_aqara_cube_t1_pro_action",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 250,
        "y": 300,
        "wires": [
            [
                "28db21af551a72ea",
                "a4305ad9ed7363c5"
            ]
        ]
    },
    {
        "id": "28db21af551a72ea",
        "type": "debug",
        "z": "e47116f2e9504c6c",
        "d": true,
        "name": "Aqara Cube T1 Pro",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 490,
        "y": 120,
        "wires": []
    },
    {
        "id": "a4305ad9ed7363c5",
        "type": "switch",
        "z": "e47116f2e9504c6c",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "shake",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 500,
        "y": 300,
        "wires": [
            [
                "b6cc3e85def4a168"
            ]
        ]
    },
    {
        "id": "6e9338df8a487bd7",
        "type": "api-call-service",
        "z": "e47116f2e9504c6c",
        "name": "Mi Smart Clock",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "tts",
        "service": "google_say",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.mi_smart_clock_leonie"
        ],
        "data": "{\"message\":\"Léonie, met toi en pyjama !\",\"language\":\"fr\"}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 1080,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "b6cc3e85def4a168",
        "type": "api-call-service",
        "z": "e47116f2e9504c6c",
        "name": "Sound level",
        "server": "67f9f8146a54c570",
        "version": 5,
        "debugenabled": false,
        "domain": "media_player",
        "service": "volume_set",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.mi_smart_clock_leonie"
        ],
        "data": "{\"volume_level\":0.75}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 790,
        "y": 300,
        "wires": [
            [
                "6e9338df8a487bd7"
            ]
        ]
    },
    {
        "id": "a31a1c54c01bb39e",
        "type": "inject",
        "z": "e47116f2e9504c6c",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 490,
        "y": 360,
        "wires": [
            [
                "b6cc3e85def4a168"
            ]
        ]
    }
]